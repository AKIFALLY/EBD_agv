{
  "id": "wcs-flow@0.1.0",
  "name": "Rack旋轉檢查-房間出口",
  "description": "當房間出口有Rack且B面完成後，需要旋轉回A面以便後續搬運",
  "nodes": [
    {
      "id": "condition_1",
      "label": "貨架位置檢查",
      "data": {
        "name": "房間出口有 Rack",
        "type": "rack-location-check",
        "category": "condition",
        "description": "房間出口位置有 Rack",
        "locationType": "room_exit",
        "rackSide": "",
        "workId": "",
        "checkType": ""
      },
      "position": [100, 80]
    },
    {
      "id": "condition_2",
      "label": "貨架面完成",
      "data": {
        "name": "Rack B面已完成",
        "type": "rack-side-completed",
        "category": "condition",
        "description": "Rack B面已完成 (沒有任何待處理的 carrier，都被搬走了)",
        "locationType": "",
        "rackSide": "B",
        "workId": "",
        "checkType": ""
      },
      "position": [100, 160]
    },
    {
      "id": "condition_3",
      "label": "貨架有工作",
      "data": {
        "name": "Rack A面有待處理工作",
        "type": "rack-has-work",
        "category": "condition",
        "description": "Rack A面有待處理工作 (還有 carrier 在該 Rack 上)",
        "locationType": "",
        "rackSide": "A",
        "workId": "",
        "checkType": ""
      },
      "position": [100, 240]
    },
    {
      "id": "condition_4",
      "label": "貨架位置檢查",
      "data": {
        "name": "需要旋轉處理 A面",
        "type": "rack-location-check",
        "category": "condition",
        "description": "Rack 需要旋轉以處理 A面 (從 180度 → 0度)",
        "locationType": "room_exit",
        "rackSide": "",
        "workId": "",
        "checkType": "rotation_needed"
      },
      "position": [100, 320]
    },
    {
      "id": "condition_5",
      "label": "無活動任務",
      "data": {
        "name": "該位置無衝突任務",
        "type": "no-active-task",
        "category": "condition",
        "description": "該位置無衝突任務",
        "locationType": "",
        "rackSide": "",
        "workId": "220001",
        "checkType": ""
      },
      "position": [100, 400]
    },
    {
      "id": "and_gate_1",
      "label": "AND 閘",
      "data": {
        "name": "所有條件檢查",
        "type": "and-gate",
        "category": "logic",
        "description": "所有觸發條件必須為 true 才執行",
        "nextInputIndex": 6
      },
      "position": [400, 240]
    },
    {
      "id": "action_1",
      "label": "創建任務",
      "data": {
        "name": "執行 Rack 旋轉",
        "type": "create-task",
        "category": "action",
        "description": "房間出口 B面→A面 旋轉",
        "taskType": "rack_rotation",
        "robotModel": "KUKA400i",
        "missionType": "RACK_MOVE",
        "source": "room_exit",
        "destination": "room_exit",
        "equipmentId": "KUKA_001",
        "workId": "220001",
        "priority": "high"
      },
      "position": [700, 240]
    }
  ],
  "connections": [
    {
      "id": "conn_1",
      "source": "condition_1",
      "target": "and_gate_1",
      "sourceOutput": "result",
      "targetInput": "condition1"
    },
    {
      "id": "conn_2",
      "source": "condition_2",
      "target": "and_gate_1",
      "sourceOutput": "result",
      "targetInput": "condition2"
    },
    {
      "id": "conn_3",
      "source": "condition_3",
      "target": "and_gate_1",
      "sourceOutput": "result",
      "targetInput": "condition3"
    },
    {
      "id": "conn_4",
      "source": "condition_4",
      "target": "and_gate_1",
      "sourceOutput": "result",
      "targetInput": "condition4"
    },
    {
      "id": "conn_5",
      "source": "condition_5",
      "target": "and_gate_1",
      "sourceOutput": "result",
      "targetInput": "condition5"
    },
    {
      "id": "conn_6",
      "source": "and_gate_1",
      "target": "action_1",
      "sourceOutput": "result",
      "targetInput": "trigger"
    }
  ]
}