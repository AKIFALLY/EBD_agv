<!DOCTYPE html>
<html>
<head>
    <title>Pythonå¯åŸ·è¡ŒJSONå°å‡ºæ¸¬è©¦</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        .section { background: #f8f9fa; padding: 20px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #007bff; }
        .success-section { border-left: 4px solid #28a745; background: #d4edda; }
        .test-case { background: white; padding: 15px; margin: 10px 0; border-radius: 5px; border: 1px solid #dee2e6; }
        .json-output { background: #2d2d2d; color: #f8f9fa; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; font-size: 12px; overflow-x: auto; max-height: 400px; overflow-y: auto; }
        button { background: #007bff; color: white; padding: 12px 24px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; margin: 10px 5px; }
        button:hover { background: #0056b3; }
        .step-number { background: #007bff; color: white; width: 30px; height: 30px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; margin-right: 15px; font-weight: bold; }
        h1 { color: #343a40; text-align: center; }
        h2 { color: #495057; border-bottom: 2px solid #dee2e6; padding-bottom: 10px; }
        .highlight { background: #fff3cd; padding: 2px 6px; border-radius: 3px; }
        .feature-list { list-style: none; padding-left: 0; }
        .feature-list li { padding: 8px 0; border-bottom: 1px solid #eee; }
        .feature-list li:before { content: "âœ… "; color: #28a745; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ Pythonå¯åŸ·è¡ŒJSONå°å‡ºæ¸¬è©¦</h1>
        
        <div class="success-section">
            <h2>ğŸ¯ æ–°å°å‡ºæ ¼å¼ç‰¹æ€§</h2>
            <ul class="feature-list">
                <li>çµæ§‹åŒ–å·¥ä½œæµæ­¥é©Ÿï¼Œæ”¯æ´Pythonç›´æ¥åŸ·è¡Œ</li>
                <li>å®Œæ•´çš„æµç¨‹æ§åˆ¶ï¼ˆæ¢ä»¶åˆ†æ”¯ã€é‚è¼¯é‹ç®—ã€è¿´åœˆï¼‰</li>
                <li>è®Šæ•¸ç³»çµ±æ”¯æ´å‹•æ…‹åƒæ•¸æ›¿æ›</li>
                <li>æˆ¿é–“è¿´åœˆè‡ªå‹•åŒ…è£ç‚º foreach æ­¥é©Ÿ</li>
                <li>ç¯€é»é€£æ¥é—œä¿‚åˆ†æå’ŒåŸ·è¡Œé †åºç”Ÿæˆ</li>
                <li>é‚è¼¯ç¯€é»ï¼ˆAND/ORï¼‰çš„å¤šæ¢ä»¶è™•ç†</li>
            </ul>
        </div>

        <div class="section">
            <h2>ğŸ§ª æ¸¬è©¦æ¡ˆä¾‹</h2>
            
            <div class="test-case">
                <h3><span class="step-number">1</span>ç°¡å–®æ¢ä»¶ â†’ å‹•ä½œæµç¨‹</h3>
                <p><strong>æ¸¬è©¦ç›®æ¨™ï¼š</strong>é©—è­‰åŸºæœ¬çš„æ¢ä»¶æª¢æŸ¥å’Œä»»å‹™å‰µå»ºæµç¨‹</p>
                <p><strong>æµç¨‹è¨­è¨ˆï¼š</strong></p>
                <ol>
                    <li>å‰µå»º "æˆ¿é–“å…§æ˜¯å¦æœ‰Carrier" æ¢ä»¶ç¯€é»</li>
                    <li>é€£æ¥åˆ° "å‰µå»ºä»»å‹™" å‹•ä½œç¯€é»</li>
                    <li>è¨­å®šæˆ¿é–“ç·¨è™Ÿç‚º "01"</li>
                    <li>å°å‡ºä¸¦æª¢æŸ¥JSONçµæ§‹</li>
                </ol>
            </div>
            
            <div class="test-case">
                <h3><span class="step-number">2</span>æˆ¿é–“è¿´åœˆ + æ¢ä»¶åˆ¤æ–·</h3>
                <p><strong>æ¸¬è©¦ç›®æ¨™ï¼š</strong>é©—è­‰ FOR_LOOP åƒæ•¸è½‰æ›ç‚º foreach æ­¥é©Ÿ</p>
                <p><strong>æµç¨‹è¨­è¨ˆï¼š</strong></p>
                <ol>
                    <li>å‰µå»ºæ¢ä»¶ç¯€é»ï¼Œè¨­å®šæˆ¿é–“ç·¨è™Ÿç‚º "å…¨éƒ¨æˆ¿é–“(1~5)"</li>
                    <li>é€£æ¥åˆ°å‹•ä½œç¯€é»</li>
                    <li>å°å‡ºä¸¦æª¢æŸ¥æ˜¯å¦ç”Ÿæˆ foreach çµæ§‹</li>
                    <li>é©—è­‰è®Šæ•¸æ›¿æ› ${current_room}</li>
                </ol>
            </div>
            
            <div class="test-case">
                <h3><span class="step-number">3</span>é‚è¼¯ç¯€é»æ¸¬è©¦ï¼ˆANDé–˜ï¼‰</h3>
                <p><strong>æ¸¬è©¦ç›®æ¨™ï¼š</strong>é©—è­‰å¤šæ¢ä»¶é‚è¼¯é‹ç®—</p>
                <p><strong>æµç¨‹è¨­è¨ˆï¼š</strong></p>
                <ol>
                    <li>å‰µå»ºå…©å€‹æ¢ä»¶ç¯€é»</li>
                    <li>é€£æ¥åˆ° AND é‚è¼¯ç¯€é»</li>
                    <li>AND ç¯€é»é€£æ¥åˆ°å‹•ä½œç¯€é»</li>
                    <li>æª¢æŸ¥ logic_and æ­¥é©Ÿç”Ÿæˆ</li>
                </ol>
            </div>
            
            <div class="test-case">
                <h3><span class="step-number">4</span>è¤‡é›œæ··åˆæµç¨‹</h3>
                <p><strong>æ¸¬è©¦ç›®æ¨™ï¼š</strong>é©—è­‰è¤‡é›œæµç¨‹çš„å®Œæ•´è½‰æ›</p>
                <p><strong>æµç¨‹è¨­è¨ˆï¼š</strong></p>
                <ol>
                    <li>å¤šå€‹æ¢ä»¶ç¯€é» + é‚è¼¯ç¯€é»çµ„åˆ</li>
                    <li>åŒ…å«æˆ¿é–“è¿´åœˆ</li>
                    <li>å¤šå€‹å‹•ä½œç¯€é»</li>
                    <li>é©—è­‰åŸ·è¡Œé †åºå’Œä¾è³´é—œä¿‚</li>
                </ol>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“‹ æ¸¬è©¦æ­¥é©Ÿ</h2>
            <ol>
                <li><strong>é–‹å•Ÿè¨­è¨ˆå™¨ï¼š</strong>é»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å•Ÿ WCS Flow Designer</li>
                <li><strong>è¨­è¨ˆæ¸¬è©¦æµç¨‹ï¼š</strong>æ ¹æ“šä¸Šè¿°æ¸¬è©¦æ¡ˆä¾‹å‰µå»ºæµç¨‹</li>
                <li><strong>å°å‡ºJSONï¼š</strong>é»æ“Šå·¥å…·æ¬„çš„ "Export" æŒ‰éˆ•</li>
                <li><strong>æª¢æŸ¥çµæœï¼š</strong>åˆ†æå°å‡ºçš„JSONçµæ§‹</li>
                <li><strong>é©—è­‰æ ¼å¼ï¼š</strong>ç¢ºèªç¬¦åˆPythonå¯åŸ·è¡Œæ ¼å¼</li>
            </ol>
        </div>

        <div class="section">
            <h2>ğŸ” é æœŸJSONçµæ§‹</h2>
            <div class="json-output">
{
  "workflow": {
    "name": "WCS Flow Export",
    "description": "Generated executable workflow from WCS Flow Designer",
    "version": "1.0",
    "execution_mode": "foreach_room",
    "variables": {
      "rooms": ["01", "02", "03", "04", "05"],
      "current_room": null
    },
    "steps": [
      {
        "type": "foreach",
        "id": "room_iteration",
        "iterator": "rooms",
        "variable": "current_room",
        "steps": [
          {
            "type": "condition",
            "id": "room-has-carrier_1",
            "function": "room_has_carrier",
            "description": "æˆ¿é–“å…§æ˜¯å¦æœ‰Carrier",
            "parameters": {
              "room_id": "${current_room}",
              "check_exists": true
            },
            "on_true": "create-task_1",
            "on_false": "end_step"
          },
          {
            "type": "create_task",
            "id": "create-task_1",
            "description": "å‰µå»ºä»»å‹™",
            "api": "submit_mission",
            "parameters": {
              "task_type": "rack_transport",
              "model": "KUKA400i",
              "mission_type": "RACK_MOVE",
              "path": {
                "type": "transport",
                "source": "room_${current_room}_exit",
                "destination": "manual_collection_area"
              }
            }
          }
        ]
      }
    ]
  }
}
            </div>
        </div>

        <div class="section">
            <h2>âœ… é©—è­‰æ¸…å–®</h2>
            <ul>
                <li>[ ] JSON æ ¼å¼æœ‰æ•ˆä¸”çµæ§‹å®Œæ•´</li>
                <li>[ ] workflow ç‰©ä»¶åŒ…å«æ‰€æœ‰å¿…è¦æ¬„ä½</li>
                <li>[ ] variables æ­£ç¢ºå®šç¾©æˆ¿é–“é™£åˆ—</li>
                <li>[ ] steps é™£åˆ—åŒ…å«æ‰€æœ‰ç¯€é»è½‰æ›</li>
                <li>[ ] æ¢ä»¶ç¯€é»è½‰æ›ç‚º condition æ­¥é©Ÿ</li>
                <li>[ ] é‚è¼¯ç¯€é»è½‰æ›ç‚º logic_and/logic_or æ­¥é©Ÿ</li>
                <li>[ ] å‹•ä½œç¯€é»è½‰æ›ç‚º create_task æ­¥é©Ÿ</li>
                <li>[ ] æˆ¿é–“è¿´åœˆç”Ÿæˆ foreach åŒ…è£</li>
                <li>[ ] è®Šæ•¸æ›¿æ›æ­£ç¢º (${current_room})</li>
                <li>[ ] ç¯€é»é€£æ¥é—œä¿‚è½‰æ›ç‚ºæ­¥é©Ÿä¾è³´</li>
                <li>[ ] åŸ·è¡Œé †åºé‚è¼¯æ­£ç¢º</li>
                <li>[ ] æ‰€æœ‰åƒæ•¸æ­£ç¢ºæ˜ å°„</li>
            </ul>
        </div>

        <button onclick="window.open('index.html', '_blank')">ğŸš€ é–‹å•Ÿ WCS Flow Designer</button>
        <button onclick="runAutoTest()">ğŸ¤– åŸ·è¡Œè‡ªå‹•æ¸¬è©¦</button>
        
        <div class="section" id="testResults" style="display: none;">
            <h2>ğŸ§ª è‡ªå‹•æ¸¬è©¦çµæœ</h2>
            <div id="testOutput"></div>
        </div>
    </div>

    <script>
        function runAutoTest() {
            const resultsSection = document.getElementById('testResults');
            const output = document.getElementById('testOutput');
            
            resultsSection.style.display = 'block';
            output.innerHTML = '<p>ğŸ”„ æ­£åœ¨åŸ·è¡Œè‡ªå‹•æ¸¬è©¦...</p>';
            
            setTimeout(() => {
                output.innerHTML = `
                    <div class="success-section">
                        <h3>âœ… æ¸¬è©¦å®Œæˆ</h3>
                        <p>ç”±æ–¼é€™æ˜¯éœæ…‹æ¸¬è©¦é é¢ï¼Œè«‹æ‰‹å‹•åŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š</p>
                        <ol>
                            <li>é–‹å•Ÿ WCS Flow Designer</li>
                            <li>æŒ‰ç…§æ¸¬è©¦æ¡ˆä¾‹å‰µå»ºæµç¨‹</li>
                            <li>å°å‡ºJSONä¸¦æª¢æŸ¥æ ¼å¼</li>
                            <li>å°ç…§é æœŸçµæ§‹é©—è­‰æ­£ç¢ºæ€§</li>
                        </ol>
                        <p><strong>é‡é»æª¢æŸ¥ï¼š</strong></p>
                        <ul>
                            <li>âœ… workflow.variables åŒ…å«æˆ¿é–“é™£åˆ—</li>
                            <li>âœ… steps ä¸­æœ‰ foreach åŒ…è£ï¼ˆå¦‚æœä½¿ç”¨æˆ¿é–“è¿´åœˆï¼‰</li>
                            <li>âœ… condition æ­¥é©Ÿæœ‰æ­£ç¢ºçš„ function å’Œ parameters</li>
                            <li>âœ… create_task æ­¥é©Ÿæœ‰å®Œæ•´çš„ api å’Œ parameters</li>
                            <li>âœ… è®Šæ•¸æ›¿æ›èªæ³•æ­£ç¢º \${current_room}</li>
                        </ul>
                    </div>
                `;
            }, 1500);
        }
    </script>
</body>
</html>