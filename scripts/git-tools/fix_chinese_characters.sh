#!/bin/bash

# 修復整個專案中的簡體中文字符為繁體中文
# Script to replace Simplified Chinese with Traditional Chinese across the project

echo "🔧 開始修復整個專案的簡體中文字符..."

# 定義簡體 -> 繁體的映射
declare -A char_map=(
    ["优化"]="優化"
    ["连接"]="連接" 
    ["连线"]="連線"
    ["编辑"]="編輯"
    ["节点"]="節點"
    ["处理"]="處理"
    ["设置"]="設置"
    ["选择"]="選擇"
    ["删除"]="刪除"
    ["创建"]="創建"
    ["标准"]="標準"
    ["检查"]="檢查"
    ["验证"]="驗證"
    ["确认"]="確認"
    ["输入"]="輸入"
    ["输出"]="輸出"
    ["参数"]="參數"
    ["配置"]="配置"
    ["初始化"]="初始化"
    ["渲染"]="渲染"
    ["加载"]="載入"
    ["阶段"]="階段"  
    ["编码"]="編碼"
    ["简体"]="簡體"
    ["繁体"]="繁體"
    ["页面"]="頁面"
    ["视图"]="視圖"
    ["显示"]="顯示"
    ["隐藏"]="隱藏"
    ["组件"]="組件"
    ["模块"]="模組"
    ["单击"]="點擊"
    ["双击"]="雙擊"
    ["拖拽"]="拖拽"
    ["选中"]="選中"
    ["高亮"]="高亮"
    ["获取"]="獲取"
    ["响应"]="響應"
    ["请求"]="請求"
    ["数据"]="數據"
    ["缓存"]="緩存"
    ["清除"]="清除"
    ["重置"]="重置"
    ["刷新"]="刷新"
    ["更新"]="更新"
    ["同步"]="同步"
    ["异步"]="異步"
    ["线程"]="線程"
    ["进程"]="進程"
    ["队列"]="隊列"
    ["栈"]="棧"
    ["堆"]="堆"
    ["递归"]="遞歸"
    ["迭代"]="迭代"
    ["循环"]="循環"
    ["条件"]="條件"
    ["逻辑"]="邏輯"
    ["算法"]="算法"
    ["结构"]="結構"
    ["对象"]="對象"
    ["属性"]="屬性"
    ["方法"]="方法"
    ["函数"]="函數"
    ["变量"]="變數"
    ["常量"]="常量"
    ["类型"]="類型"
    ["接口"]="接口"
    ["继承"]="繼承"
    ["封装"]="封裝"
    ["多态"]="多態"
    ["抽象"]="抽象"
    ["实现"]="實現"
    ["实例"]="實例"
    ["静态"]="靜態"
    ["动态"]="動態"
    ["公共"]="公共"
    ["私有"]="私有"
    ["保护"]="保護"
    ["默认"]="預設"
    ["自定义"]="自定義"
    ["扩展"]="擴展"
    ["插件"]="插件"
    ["组合"]="組合"
    ["分离"]="分離"
    ["合并"]="合併"
    ["拆分"]="拆分"
    ["压缩"]="壓縮"
    ["解压"]="解壓"
    ["加密"]="加密"
    ["解密"]="解密"
    ["编译"]="編譯"
    ["解析"]="解析"
    ["转换"]="轉換"
    ["映射"]="映射"
    ["绑定"]="綁定"
    ["监听"]="監聽"
    ["触发"]="觸發"
    ["事件"]="事件"
    ["回调"]="回調"
    ["异常"]="異常"
    ["错误"]="錯誤"
    ["警告"]="警告"
    ["信息"]="信息"
    ["调试"]="調試"
    ["测试"]="測試"
    ["部署"]="部署"
    ["发布"]="發布"
    ["版本"]="版本"
    ["升级"]="升級"
    ["迁移"]="遷移"
    ["备份"]="備份"
    ["恢复"]="恢復"
    ["导入"]="導入"
    ["导出"]="導出"
    ["格式"]="格式"
    ["协议"]="協議"
    ["标识"]="標識"
    ["路径"]="路徑"
    ["文件"]="檔案"
    ["目录"]="目錄"
    ["权限"]="權限"
    ["安全"]="安全"
    ["认证"]="認證"
    ["授权"]="授權"
    ["会话"]="會話"
    ["状态"]="狀態"
    ["模式"]="模式"
    ["样式"]="樣式"
    ["主题"]="主題"
    ["布局"]="佈局"
    ["网格"]="網格"
    ["列表"]="列表"
    ["表格"]="表格"
    ["表单"]="表單"
    ["输入框"]="輸入框"
    ["按钮"]="按鈕"
    ["菜单"]="選單"
    ["导航"]="導航"
    ["搜索"]="搜尋"
    ["过滤"]="過濾"
    ["排序"]="排序"
    ["分页"]="分頁"
    ["标签"]="標籤"
    ["图标"]="圖標"
    ["图片"]="圖片"
    ["图表"]="圖表"
    ["绘制"]="繪製"
    ["画布"]="畫布"
    ["坐标"]="座標"
    ["尺寸"]="尺寸"
    ["位置"]="位置"
    ["边界"]="邊界"
    ["边距"]="邊距"
    ["内边距"]="內邊距"
    ["外边距"]="外邊距"
    ["对齐"]="對齊"
    ["居中"]="居中"
    ["左对齐"]="左對齊"
    ["右对齐"]="右對齊"
    ["顶部对齐"]="頂部對齊"
    ["底部对齐"]="底部對齊"
    ["水平"]="水平"
    ["垂直"]="垂直"
    ["透明度"]="透明度"
    ["颜色"]="顏色"
    ["背景"]="背景"
    ["前景"]="前景"
    ["边框"]="邊框"
    ["阴影"]="陰影"
    ["渐变"]="漸變"
    ["动画"]="動畫"
    ["过渡"]="過渡" 
    ["效果"]="效果"
    ["滤镜"]="濾鏡"
    ["变形"]="變形"
    ["旋转"]="旋轉"
    ["缩放"]="縮放"
    ["移动"]="移動"
    ["平移"]="平移"
    ["倾斜"]="傾斜"
    ["翻转"]="翻轉"
    ["镜像"]="鏡像"
    ["裁剪"]="裁剪"
    ["遮罩"]="遮罩"
    ["蒙版"]="蒙版"
    ["混合"]="混合"
    ["层级"]="層級"
    ["深度"]="深度"
    ["优先级"]="優先級"
    ["权重"]="權重"
    ["频率"]="頻率"
    ["延迟"]="延遲"
    ["间隔"]="間隔"
    ["持续"]="持續"
    ["暂停"]="暫停"
    ["停止"]="停止"
    ["开始"]="開始"
    ["结束"]="結束"
    ["完成"]="完成"
    ["成功"]="成功"
    ["失败"]="失敗"
    ["取消"]="取消"
    ["关闭"]="關閉"
    ["打开"]="打開"
    ["展开"]="展開"
    ["收起"]="收起"
    ["折叠"]="摺疊"
    ["切换"]="切換"
    ["激活"]="激活" 
    ["启用"]="啟用"
    ["禁用"]="禁用"
    ["可用"]="可用"
    ["不可用"]="不可用"
    ["有效"]="有效"
    ["无效"]="無效"
    ["正确"]="正確"
    ["错误"]="錯誤"
    ["准确"]="準確"
    ["精确"]="精確"
    ["模糊"]="模糊"
    ["清晰"]="清晰"
    ["锐化"]="銳化"
    ["平滑"]="平滑"
    ["粗糙"]="粗糙"
    ["细腻"]="細膩"
    ["粗体"]="粗體"
    ["斜体"]="斜體"
    ["下划线"]="下劃線"
    ["删除线"]="刪除線"
    ["字体"]="字體"
    ["字号"]="字號"
    ["字符"]="字符"
    ["编码"]="編碼"
    ["解码"]="解碼"
    ["转码"]="轉碼"
    ["格式化"]="格式化"
    ["美化"]="美化"
    ["压缩"]="壓縮"
    ["最小化"]="最小化"
    ["最大化"]="最大化"
    ["还原"]="還原"
    ["恢复"]="恢復"
    ["撤销"]="撤銷"
    ["重做"]="重做"
    ["复制"]="複製"
    ["粘贴"]="貼上"
    ["剪切"]="剪切"
    ["全选"]="全選"
    ["清空"]="清空"
    ["查找"]="查找"
    ["替换"]="替換"
    ["跳转"]="跳轉"
    ["定位"]="定位"
    ["导航"]="導航"
    ["路由"]="路由"
    ["链接"]="連結"
    ["地址"]="地址"
    ["端口"]="端口"
    ["协议"]="協議"
    ["域名"]="域名"
    ["主机"]="主機"
    ["服务器"]="伺服器"
    ["客户端"]="客戶端"
    ["浏览器"]="瀏覽器"
    ["网络"]="網路"
    ["互联网"]="網際網路"
    ["局域网"]="區域網路"
    ["广域网"]="廣域網路"
    ["无线"]="無線"
    ["有线"]="有線"
    ["蓝牙"]="藍牙"
    ["红外"]="紅外"
    ["射频"]="射頻"
    ["信号"]="信號"
    ["频道"]="頻道"
    ["带宽"]="頻寬"
    ["流量"]="流量"
    ["速度"]="速度"
    ["延迟"]="延遲"
    ["丢包"]="丟包"
    ["重传"]="重傳"
    ["超时"]="超時"
    ["连接"]="連接"
    ["断开"]="斷開"
    ["重连"]="重連"
    ["握手"]="握手"
    ["验证"]="驗證"
    ["加密"]="加密"
    ["解密"]="解密"
    ["签名"]="簽名"
    ["证书"]="證書"
    ["密钥"]="密鑰"
    ["公钥"]="公鑰"
    ["私钥"]="私鑰"
    ["哈希"]="雜湊"
    ["摘要"]="摘要"
    ["校验"]="校驗"
    ["完整性"]="完整性"
    ["一致性"]="一致性"
    ["可靠性"]="可靠性"
    ["稳定性"]="穩定性"
    ["兼容性"]="相容性"
    ["扩展性"]="擴展性"
    ["可维护性"]="可維護性"
    ["可读性"]="可讀性"
    ["可用性"]="可用性"
    ["易用性"]="易用性"
    ["友好性"]="友好性"
    ["美观性"]="美觀性"
    ["响应式"]="響應式"
    ["自适应"]="自適應"
    ["流式"]="流式"
    ["弹性"]="彈性"
    ["灵活"]="靈活"
    ["固定"]="固定"
    ["相对"]="相對"
    ["绝对"]="絕對"
    ["静态"]="靜態"
    ["动态"]="動態"
    ["实时"]="即時"
    ["同步"]="同步"
    ["异步"]="異步"
    ["并行"]="並行"
    ["串行"]="串行"
    ["顺序"]="順序"
    ["随机"]="隨機"
    ["排列"]="排列"
    ["组合"]="組合"
    ["集合"]="集合"
    ["数组"]="陣列"
    ["链表"]="鏈表"
    ["树"]="樹"
    ["图"]="圖"
    ["节点"]="節點"
    ["边"]="邊"
    ["路径"]="路徑"
    ["环"]="環"
    ["回路"]="回路"
    ["循环"]="循環"
    ["递归"]="遞迴"
    ["迭代"]="迭代"
    ["遍历"]="遍歷"
    ["搜索"]="搜尋"
    ["查找"]="查找"
    ["排序"]="排序"
    ["过滤"]="過濾"
    ["筛选"]="篩選"
    ["匹配"]="匹配"
    ["比较"]="比較"
    ["相等"]="相等"
    ["不等"]="不等"
    ["大于"]="大於"
    ["小于"]="小於"
    ["等于"]="等於"
    ["包含"]="包含"
    ["排除"]="排除"
    ["开始"]="開始"
    ["结束"]="結束"
    ["中间"]="中間"
    ["前面"]="前面"
    ["后面"]="後面"
    ["上面"]="上面"
    ["下面"]="下面"
    ["左边"]="左邊"
    ["右边"]="右邊"
    ["中心"]="中心"
    ["边缘"]="邊緣"
    ["角落"]="角落"
    ["顶点"]="頂點"
    ["底部"]="底部"
    ["顶部"]="頂部"
    ["侧面"]="側面"
    ["正面"]="正面"
    ["反面"]="反面"
    ["内部"]="內部"
    ["外部"]="外部"
    ["内容"]="內容"
    ["标题"]="標題"
    ["标签"]="標籤"
    ["描述"]="描述"
    ["说明"]="說明"
    ["注释"]="註釋"
    ["备注"]="備註"
    ["提示"]="提示"
    ["帮助"]="幫助"
    ["指南"]="指南"
    ["教程"]="教程"
    ["示例"]="示例"
    ["样本"]="樣本"
    ["模板"]="模板"
    ["原型"]="原型"
    ["草图"]="草圖"
    ["设计"]="設計"
    ["开发"]="開發"
    ["制作"]="製作"
    ["构建"]="構建"
    ["编译"]="編譯"
    ["打包"]="打包"
    ["部署"]="部署"
    ["发布"]="發布"
    ["上线"]="上線"
    ["下线"]="下線"
    ["维护"]="維護"
    ["监控"]="監控"
    ["日志"]="日誌"
    ["统计"]="統計"
    ["分析"]="分析"
    ["报告"]="報告"
    ["总结"]="總結"
    ["评估"]="評估"
    ["审核"]="審核"
    ["检测"]="檢測"
    ["扫描"]="掃描"
    ["验证"]="驗證"
    ["校验"]="校驗"
    ["测试"]="測試"
    ["调试"]="調試"
    ["修复"]="修復"
    ["优化"]="優化"
    ["改进"]="改進"
    ["增强"]="增強"
    ["升级"]="升級"
    ["更新"]="更新"
    ["补丁"]="補丁"
    ["热修复"]="熱修復"
    ["回滚"]="回滾"
    ["还原"]="還原"
    ["恢复"]="恢復"
    ["备份"]="備份"
    ["存储"]="儲存"
    ["保存"]="儲存"
    ["载入"]="載入"
    ["导入"]="導入"
    ["导出"]="導出"
    ["传输"]="傳輸"
    ["上传"]="上傳"
    ["下载"]="下載"
    ["同步"]="同步"
    ["复制"]="複製"
    ["移动"]="移動"
    ["重命名"]="重新命名"
    ["删除"]="刪除"
    ["清理"]="清理"
    ["整理"]="整理"
    ["归类"]="歸類"
    ["分组"]="分組"
    ["标记"]="標記"
    ["标注"]="標註"
    ["高亮"]="高亮"
    ["突出"]="突出"
    ["强调"]="強調"
    ["重点"]="重點"
# 常见错别字和简体字
    ["个"]="個"
    ["线"]="線"
    ["并"]="並"
    ["选"]="選"
    ["请"]="請"
    ["诊"]="診"
    ["时"]="時"
    ["变"]="變"
    ["发"]="發"
    ["开"]="開"
    ["关"]="關"
    ["过"]="過"
    ["临"]="臨"
    ["间"]="間"
    ["问"]="問"
    ["显"]="顯"
    ["说"]="說"
    ["读"]="讀"
    ["诗"]="詩"
    ["词"]="詞"
    ["审"]="審"
    ["详"]="詳"
    ["语"]="語"
    ["话"]="話"
    ["谈"]="談"
    ["讲"]="講"
    ["课"]="課"
    ["训"]="訓"
    ["访"]="訪"
    ["让"]="讓"
    ["计"]="計"
    ["认"]="認"
    ["议"]="議"
    ["记"]="記"
    ["许"]="許"
    ["设"]="設"
    ["论"]="論"
    ["证"]="證"
    ["试"]="試"
    ["评"]="評"
    ["调"]="調"
    ["课"]="課"
    ["详"]="詳"
    ["该"]="該"
    ["误"]="誤"
    ["诚"]="誠"
    ["谢"]="謝"
    ["谨"]="謹"
    ["警"]="警"
    ["护"]="護"
    ["报"]="報"
    ["请"]="請"
    ["质"]="質"
    ["责"]="責"
    ["负"]="負"
    ["财"]="財"
    ["贸"]="貿"
    ["费"]="費"
    ["资"]="資"
    ["账"]="帳"
    ["货"]="貨"
    ["购"]="購"
    ["贷"]="貸"
    ["贴"]="貼"
    ["赏"]="賞"
    ["赚"]="賺"
    ["赔"]="賠"
    ["赠"]="贈"
    ["赞"]="讚"
    ["赖"]="賴"
    ["赛"]="賽"
    ["赢"]="贏"
    ["轰"]="轟"
    ["车"]="車"
    ["轮"]="輪"
    ["软"]="軟"
    ["载"]="載"
    ["较"]="較"
    ["轻"]="輕"
    ["转"]="轉"
    ["辆"]="輛"
    ["输"]="輸"
    ["辐"]="輻"
    ["辑"]="輯"
    ["辞"]="辭"
    ["辨"]="辨"
    ["辩"]="辯"
    ["边"]="邊"
    ["达"]="達"
    ["违"]="違"
    ["连"]="連"
    ["迟"]="遲"
    ["迅"]="迅"
    ["过"]="過"
    ["这"]="這"
    ["进"]="進"
    ["远"]="遠"
    ["违"]="違"
    ["运"]="運"
    ["近"]="近"
    ["还"]="還"
    ["迁"]="遷"
    ["选"]="選"
    ["递"]="遞"
    ["逻"]="邏"
    ["途"]="途"
    ["逐"]="逐"
    ["透"]="透"
    ["逃"]="逃"
    ["逆"]="逆"
    ["逊"]="遜"
    ["遮"]="遮"
    ["避"]="避"
    ["邀"]="邀"
    ["邻"]="鄰"
    ["郑"]="鄭"
    ["部"]="部"
    ["配"]="配"
    ["酒"]="酒"
    ["酸"]="酸"
    ["醇"]="醇"
    ["醒"]="醒"
    ["采"]="採"
    ["释"]="釋"
    ["里"]="裡"
    ["重"]="重"
    ["野"]="野"
    ["量"]="量"
    ["金"]="金"
    ["钱"]="錢"
    ["针"]="針"
    ["钓"]="釣"
    ["钟"]="鐘"
    ["钢"]="鋼"
    ["钻"]="鑽"
    ["铁"]="鐵"
    ["铜"]="銅"
    ["银"]="銀"
    ["销"]="銷"
    ["锁"]="鎖"
    ["锋"]="鋒"
    ["错"]="錯"
    ["录"]="錄"
    ["锦"]="錦"
    ["键"]="鍵"
    ["链"]="鏈"
    ["锈"]="鏽"
    ["镜"]="鏡"
    ["长"]="長"
    ["门"]="門"
    ["闪"]="閃"
    ["闭"]="閉"
    ["问"]="問"
    ["闻"]="聞"
    ["闲"]="閒"
    ["间"]="間"
    ["闹"]="鬧"
    ["关"]="關"
    ["阅"]="閱"
    ["阶"]="階"
    ["队"]="隊"
    ["防"]="防"
    ["阳"]="陽"
    ["阴"]="陰"
    ["陈"]="陳"
    ["降"]="降"
    ["限"]="限"
    ["除"]="除"
    ["陪"]="陪"
    ["随"]="隨"
    ["隐"]="隱"
    ["隔"]="隔"
    ["难"]="難"
    ["雨"]="雨"
    ["雪"]="雪"
    ["雷"]="雷"
    ["雾"]="霧"
    ["露"]="露"
    ["霞"]="霞"
    ["霸"]="霸"
    ["青"]="青"
    ["静"]="靜"
    ["面"]="面"
    ["革"]="革"
    ["韧"]="韌"
    ["音"]="音"
    ["响"]="響"
    ["页"]="頁"
    ["顶"]="頂"
    ["项"]="項"
    ["顺"]="順"
    ["须"]="須"
    ["预"]="預"
    ["领"]="領"
    ["频"]="頻"
    ["颗"]="顆"
    ["题"]="題"
    ["额"]="額"
    ["颜"]="顏"
    ["愿"]="願"
    ["类"]="類"
    ["风"]="風"
    ["飞"]="飛"
    ["食"]="食"
    ["饭"]="飯"
    ["饮"]="飲"
    ["饱"]="飽"
    ["饿"]="餓"
    ["餐"]="餐"
    ["馆"]="館"
    ["首"]="首"
    ["香"]="香"
    ["马"]="馬"
    ["驻"]="駐"
    ["驱"]="驅"
    ["驶"]="駛"
    ["验"]="驗"
    ["骗"]="騙"
    ["骚"]="騷"
    ["体"]="體"
    ["高"]="高"
    ["髦"]="髦"
    ["鬼"]="鬼"
    ["魂"]="魂"
    ["魔"]="魔"
    ["鱼"]="魚"
    ["鲜"]="鮮"
    ["鸟"]="鳥"
    ["鸡"]="雞"
    ["鸣"]="鳴"
    ["鸭"]="鴨"
    ["鹅"]="鵝"
    ["鹤"]="鶴"
    ["鹰"]="鷹"
    ["鹿"]="鹿"
    ["麦"]="麥"
    ["麻"]="麻"
    ["黄"]="黃"
    ["黑"]="黑"
    ["默"]="默"
    ["鼓"]="鼓"
    ["鼠"]="鼠"
    ["鼻"]="鼻"
    ["齐"]="齊"
    ["齿"]="齒"
    ["龙"]="龍"
    ["龟"]="龜"
)

# 查找所有 JavaScript 文件
echo "📁 搜尋 JavaScript 檔案..."
js_files=$(find /home/ct/RosAGV -name "*.js" -type f | grep -v node_modules | grep -v .git | head -100)

file_count=0
total_replacements=0

# 處理每個檔案
for file in $js_files; do
    if [[ -f "$file" ]]; then
        echo "🔍 處理檔案: $file"
        file_count=$((file_count + 1))
        
        # 為每個檔案執行所有替換
        for simplified in "${!char_map[@]}"; do
            traditional="${char_map[$simplified]}"
            
            # 檢查是否包含簡體字
            if grep -q "$simplified" "$file" 2>/dev/null; then
                echo "  ✏️  替換: $simplified -> $traditional"
                
                # 執行替換
                sed -i "s/$simplified/$traditional/g" "$file"
                total_replacements=$((total_replacements + 1))
            fi
        done
    fi
done

echo ""
echo "✅ 修復完成！"
echo "📊 統計信息:"
echo "   - 處理檔案數: $file_count"
echo "   - 總替換次數: $total_replacements"
echo ""
echo "🎯 主要修復內容:"
echo "   - 优化 -> 優化"
echo "   - 连接 -> 連接"
echo "   - 编辑 -> 編輯"
echo "   - 节点 -> 節點"
echo "   - 处理 -> 處理"
echo "   - 设置 -> 設置"
echo "   - 以及其他 ${#char_map[@]} 個字符映射"
echo ""
echo "🔧 建議接下來:"
echo "   1. 檢查修復結果: git diff"
echo "   2. 測試應用程式功能"
echo "   3. 如果滿意結果: git add . && git commit -m 'fix: 統一簡體中文字符為繁體中文'"