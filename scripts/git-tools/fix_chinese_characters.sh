#!/bin/bash

# 修復整個專案中的簡體中文字符為繁體中文
# Script to replace Simplified Chinese with Traditional Chinese across the project

echo "🔧 開始修復整個專案的簡體中文字符..."

# 定義簡體 -> 繁體的映射
declare -A char_map=(
    ["優化"]="優化"
    ["连接"]="連接" 
    ["连線"]="連線"
    ["編輯"]="編輯"
    ["節點"]="節點"
    ["處理"]="處理"
    ["设置"]="設置"
    ["選擇"]="選擇"
    ["刪除"]="刪除"
    ["創建"]="創建"
    ["標準"]="標準"
    ["檢查"]="檢查"
    ["验證"]="驗證"
    ["確認"]="確認"
    ["输入"]="輸入"
    ["输出"]="輸出"
    ["参數"]="參數"
    ["配置"]="配置"
    ["初始化"]="初始化"
    ["渲染"]="渲染"
    ["加載"]="載入"
    ["階段"]="階段"  
    ["編碼"]="編碼"
    ["简體"]="簡體"
    ["繁體"]="繁體"
    ["頁面"]="頁面"
    ["视圖"]="視圖"
    ["顯示"]="顯示"
    ["隐藏"]="隱藏"
    ["组件"]="組件"
    ["模塊"]="模組"
    ["單击"]="點擊"
    ["雙击"]="雙擊"
    ["拖拽"]="拖拽"
    ["選中"]="選中"
    ["高亮"]="高亮"
    ["獲取"]="獲取"
    ["響應"]="響應"
    ["请求"]="請求"
    ["數據"]="數據"
    ["缓存"]="緩存"
    ["清除"]="清除"
    ["重置"]="重置"
    ["刷新"]="刷新"
    ["更新"]="更新"
    ["同步"]="同步"
    ["异步"]="異步"
    ["線程"]="線程"
    ["進程"]="進程"
    ["隊列"]="隊列"
    ["栈"]="棧"
    ["堆"]="堆"
    ["递歸"]="遞歸"
    ["迭代"]="迭代"
    ["循環"]="循環"
    ["條件"]="條件"
    ["逻輯"]="邏輯"
    ["算法"]="算法"
    ["結構"]="結構"
    ["對象"]="對象"
    ["屬性"]="屬性"
    ["方法"]="方法"
    ["函數"]="函數"
    ["变量"]="變數"
    ["常量"]="常量"
    ["類型"]="類型"
    ["接口"]="接口"
    ["繼承"]="繼承"
    ["封装"]="封裝"
    ["多態"]="多態"
    ["抽象"]="抽象"
    ["實現"]="實現"
    ["實例"]="實例"
    ["静態"]="靜態"
    ["動態"]="動態"
    ["公共"]="公共"
    ["私有"]="私有"
    ["保護"]="保護"
    ["默認"]="預設"
    ["自定義"]="自定義"
    ["擴展"]="擴展"
    ["插件"]="插件"
    ["组合"]="組合"
    ["分離"]="分離"
    ["合並"]="合併"
    ["拆分"]="拆分"
    ["壓縮"]="壓縮"
    ["解壓"]="解壓"
    ["加密"]="加密"
    ["解密"]="解密"
    ["編译"]="編譯"
    ["解析"]="解析"
    ["轉换"]="轉換"
    ["映射"]="映射"
    ["绑定"]="綁定"
    ["監聽"]="監聽"
    ["觸發"]="觸發"
    ["事件"]="事件"
    ["回调"]="回調"
    ["异常"]="異常"
    ["錯誤"]="錯誤"
    ["警告"]="警告"
    ["信息"]="信息"
    ["调试"]="調試"
    ["測试"]="測試"
    ["部署"]="部署"
    ["發佈"]="發佈"
    ["版本"]="版本"
    ["升級"]="升級"
    ["遷移"]="遷移"
    ["備份"]="備份"
    ["恢復"]="恢復"
    ["導入"]="導入"
    ["導出"]="導出"
    ["格式"]="格式"
    ["協議"]="協議"
    ["標識"]="標識"
    ["路徑"]="路徑"
    ["文件"]="檔案"
    ["目錄"]="目錄"
    ["權限"]="權限"
    ["安全"]="安全"
    ["認證"]="認證"
    ["授權"]="授權"
    ["會話"]="會話"
    ["狀態"]="狀態"
    ["模式"]="模式"
    ["樣式"]="樣式"
    ["主題"]="主題"
    ["佈局"]="佈局"
    ["網格"]="網格"
    ["列表"]="列表"
    ["表格"]="表格"
    ["表單"]="表單"
    ["输入框"]="輸入框"
    ["按钮"]="按鈕"
    ["菜單"]="選單"
    ["導航"]="導航"
    ["搜索"]="搜尋"
    ["過滤"]="過濾"
    ["排序"]="排序"
    ["分頁"]="分頁"
    ["標簽"]="標籤"
    ["圖標"]="圖標"
    ["圖片"]="圖片"
    ["圖表"]="圖表"
    ["绘制"]="繪製"
    ["画佈"]="畫佈"
    ["坐標"]="座標"
    ["尺寸"]="尺寸"
    ["位置"]="位置"
    ["边界"]="邊界"
    ["边距"]="邊距"
    ["内边距"]="內邊距"
    ["外边距"]="外邊距"
    ["對齊"]="對齊"
    ["居中"]="居中"
    ["左對齊"]="左對齊"
    ["右對齊"]="右對齊"
    ["顶部對齊"]="頂部對齊"
    ["底部對齊"]="底部對齊"
    ["水平"]="水平"
    ["垂直"]="垂直"
    ["透明度"]="透明度"
    ["颜色"]="顏色"
    ["背景"]="背景"
    ["前景"]="前景"
    ["边框"]="邊框"
    ["陰影"]="陰影"
    ["渐变"]="漸變"
    ["動画"]="動畫"
    ["過渡"]="過渡" 
    ["效果"]="效果"
    ["滤镜"]="濾鏡"
    ["变形"]="變形"
    ["旋轉"]="旋轉"
    ["縮放"]="縮放"
    ["移動"]="移動"
    ["平移"]="平移"
    ["倾斜"]="傾斜"
    ["翻轉"]="翻轉"
    ["镜像"]="鏡像"
    ["裁剪"]="裁剪"
    ["遮罩"]="遮罩"
    ["蒙版"]="蒙版"
    ["混合"]="混合"
    ["層級"]="層級"
    ["深度"]="深度"
    ["優先級"]="優先級"
    ["權重"]="權重"
    ["频率"]="頻率"
    ["延遲"]="延遲"
    ["間隔"]="間隔"
    ["持续"]="持續"
    ["暂停"]="暫停"
    ["停止"]="停止"
    ["開始"]="開始"
    ["結束"]="結束"
    ["完成"]="完成"
    ["成功"]="成功"
    ["失敗"]="失敗"
    ["取消"]="取消"
    ["關闭"]="關閉"
    ["打開"]="打開"
    ["展開"]="展開"
    ["收起"]="收起"
    ["折疊"]="摺疊"
    ["切换"]="切換"
    ["激活"]="激活" 
    ["啟用"]="啟用"
    ["禁用"]="禁用"
    ["可用"]="可用"
    ["不可用"]="不可用"
    ["有效"]="有效"
    ["無效"]="無效"
    ["正確"]="正確"
    ["錯誤"]="錯誤"
    ["準確"]="準確"
    ["精確"]="精確"
    ["模糊"]="模糊"
    ["清晰"]="清晰"
    ["锐化"]="銳化"
    ["平滑"]="平滑"
    ["粗糙"]="粗糙"
    ["细腻"]="細膩"
    ["粗體"]="粗體"
    ["斜體"]="斜體"
    ["下劃線"]="下劃線"
    ["刪除線"]="刪除線"
    ["字體"]="字體"
    ["字號"]="字號"
    ["字符"]="字符"
    ["編碼"]="編碼"
    ["解碼"]="解碼"
    ["轉碼"]="轉碼"
    ["格式化"]="格式化"
    ["美化"]="美化"
    ["壓縮"]="壓縮"
    ["最小化"]="最小化"
    ["最大化"]="最大化"
    ["還原"]="還原"
    ["恢復"]="恢復"
    ["撤销"]="撤銷"
    ["重做"]="重做"
    ["復制"]="複製"
    ["粘贴"]="貼上"
    ["剪切"]="剪切"
    ["全選"]="全選"
    ["清空"]="清空"
    ["查找"]="查找"
    ["替换"]="替換"
    ["跳轉"]="跳轉"
    ["定位"]="定位"
    ["導航"]="導航"
    ["路由"]="路由"
    ["链接"]="連結"
    ["地址"]="地址"
    ["端口"]="端口"
    ["協議"]="協議"
    ["域名"]="域名"
    ["主機"]="主機"
    ["服務器"]="伺服器"
    ["客户端"]="客戶端"
    ["浏览器"]="瀏覽器"
    ["網络"]="網路"
    ["互联網"]="網際網路"
    ["局域網"]="區域網路"
    ["广域網"]="廣域網路"
    ["無線"]="無線"
    ["有線"]="有線"
    ["蓝牙"]="藍牙"
    ["红外"]="紅外"
    ["射频"]="射頻"
    ["信號"]="信號"
    ["频道"]="頻道"
    ["帶宽"]="頻寬"
    ["流量"]="流量"
    ["速度"]="速度"
    ["延遲"]="延遲"
    ["丢包"]="丟包"
    ["重傳"]="重傳"
    ["超時"]="超時"
    ["连接"]="連接"
    ["斷開"]="斷開"
    ["重连"]="重連"
    ["握手"]="握手"
    ["验證"]="驗證"
    ["加密"]="加密"
    ["解密"]="解密"
    ["簽名"]="簽名"
    ["證书"]="證書"
    ["密鑰"]="密鑰"
    ["公鑰"]="公鑰"
    ["私鑰"]="私鑰"
    ["哈希"]="雜湊"
    ["摘要"]="摘要"
    ["校验"]="校驗"
    ["完整性"]="完整性"
    ["一致性"]="一致性"
    ["可靠性"]="可靠性"
    ["穩定性"]="穩定性"
    ["兼容性"]="相容性"
    ["擴展性"]="擴展性"
    ["可维護性"]="可維護性"
    ["可读性"]="可讀性"
    ["可用性"]="可用性"
    ["易用性"]="易用性"
    ["友好性"]="友好性"
    ["美觀性"]="美觀性"
    ["響應式"]="響應式"
    ["自適應"]="自適應"
    ["流式"]="流式"
    ["弹性"]="彈性"
    ["靈活"]="靈活"
    ["固定"]="固定"
    ["相對"]="相對"
    ["絕對"]="絕對"
    ["静態"]="靜態"
    ["動態"]="動態"
    ["實時"]="即時"
    ["同步"]="同步"
    ["异步"]="異步"
    ["並行"]="並行"
    ["串行"]="串行"
    ["順序"]="順序"
    ["隨機"]="隨機"
    ["排列"]="排列"
    ["组合"]="組合"
    ["集合"]="集合"
    ["數组"]="陣列"
    ["链表"]="鏈表"
    ["樹"]="樹"
    ["圖"]="圖"
    ["節點"]="節點"
    ["边"]="邊"
    ["路徑"]="路徑"
    ["環"]="環"
    ["回路"]="回路"
    ["循環"]="循環"
    ["递歸"]="遞迴"
    ["迭代"]="迭代"
    ["遍歷"]="遍歷"
    ["搜索"]="搜尋"
    ["查找"]="查找"
    ["排序"]="排序"
    ["過滤"]="過濾"
    ["筛選"]="篩選"
    ["匹配"]="匹配"
    ["比较"]="比較"
    ["相等"]="相等"
    ["不等"]="不等"
    ["大于"]="大於"
    ["小于"]="小於"
    ["等于"]="等於"
    ["包含"]="包含"
    ["排除"]="排除"
    ["開始"]="開始"
    ["結束"]="結束"
    ["中間"]="中間"
    ["前面"]="前面"
    ["後面"]="後面"
    ["上面"]="上面"
    ["下面"]="下面"
    ["左边"]="左邊"
    ["右边"]="右邊"
    ["中心"]="中心"
    ["边缘"]="邊緣"
    ["角落"]="角落"
    ["顶點"]="頂點"
    ["底部"]="底部"
    ["顶部"]="頂部"
    ["侧面"]="側面"
    ["正面"]="正面"
    ["反面"]="反面"
    ["内部"]="內部"
    ["外部"]="外部"
    ["内容"]="內容"
    ["標題"]="標題"
    ["標簽"]="標籤"
    ["描述"]="描述"
    ["說明"]="說明"
    ["注釋"]="註釋"
    ["備注"]="備註"
    ["提示"]="提示"
    ["幫助"]="幫助"
    ["指南"]="指南"
    ["教程"]="教程"
    ["示例"]="示例"
    ["樣本"]="樣本"
    ["模板"]="模板"
    ["原型"]="原型"
    ["草圖"]="草圖"
    ["设计"]="設計"
    ["開發"]="開發"
    ["制作"]="製作"
    ["構建"]="構建"
    ["編译"]="編譯"
    ["打包"]="打包"
    ["部署"]="部署"
    ["發佈"]="發佈"
    ["上線"]="上線"
    ["下線"]="下線"
    ["维護"]="維護"
    ["監控"]="監控"
    ["日志"]="日誌"
    ["統计"]="統計"
    ["分析"]="分析"
    ["報告"]="報告"
    ["總結"]="總結"
    ["评估"]="評估"
    ["審核"]="審核"
    ["檢測"]="檢測"
    ["掃描"]="掃描"
    ["验證"]="驗證"
    ["校验"]="校驗"
    ["測试"]="測試"
    ["调试"]="調試"
    ["修復"]="修復"
    ["優化"]="優化"
    ["改進"]="改進"
    ["增强"]="增強"
    ["升級"]="升級"
    ["更新"]="更新"
    ["補丁"]="補丁"
    ["熱修復"]="熱修復"
    ["回滚"]="回滾"
    ["還原"]="還原"
    ["恢復"]="恢復"
    ["備份"]="備份"
    ["存储"]="儲存"
    ["保存"]="儲存"
    ["載入"]="載入"
    ["導入"]="導入"
    ["導出"]="導出"
    ["傳输"]="傳輸"
    ["上傳"]="上傳"
    ["下載"]="下載"
    ["同步"]="同步"
    ["復制"]="複製"
    ["移動"]="移動"
    ["重命名"]="重新命名"
    ["刪除"]="刪除"
    ["清理"]="清理"
    ["整理"]="整理"
    ["歸類"]="歸類"
    ["分组"]="分組"
    ["標記"]="標記"
    ["標注"]="標註"
    ["高亮"]="高亮"
    ["突出"]="突出"
    ["强调"]="強調"
    ["重點"]="重點"
# 常見錯別字和简體字
    ["個"]="個"
    ["線"]="線"
    ["並"]="並"
    ["選"]="選"
    ["请"]="請"
    ["诊"]="診"
    ["時"]="時"
    ["变"]="變"
    ["發"]="發"
    ["開"]="開"
    ["關"]="關"
    ["過"]="過"
    ["臨"]="臨"
    ["間"]="間"
    ["问"]="問"
    ["顯"]="顯"
    ["說"]="說"
    ["读"]="讀"
    ["诗"]="詩"
    ["詞"]="詞"
    ["審"]="審"
    ["详"]="詳"
    ["语"]="語"
    ["話"]="話"
    ["談"]="談"
    ["講"]="講"
    ["課"]="課"
    ["训"]="訓"
    ["访"]="訪"
    ["讓"]="讓"
    ["计"]="計"
    ["認"]="認"
    ["議"]="議"
    ["記"]="記"
    ["许"]="許"
    ["设"]="設"
    ["論"]="論"
    ["證"]="證"
    ["试"]="試"
    ["评"]="評"
    ["调"]="調"
    ["課"]="課"
    ["详"]="詳"
    ["该"]="該"
    ["誤"]="誤"
    ["诚"]="誠"
    ["謝"]="謝"
    ["谨"]="謹"
    ["警"]="警"
    ["護"]="護"
    ["報"]="報"
    ["请"]="請"
    ["質"]="質"
    ["责"]="責"
    ["負"]="負"
    ["财"]="財"
    ["贸"]="貿"
    ["费"]="費"
    ["資"]="資"
    ["賬"]="帳"
    ["货"]="貨"
    ["購"]="購"
    ["贷"]="貸"
    ["贴"]="貼"
    ["赏"]="賞"
    ["赚"]="賺"
    ["賠"]="賠"
    ["贈"]="贈"
    ["贊"]="讚"
    ["赖"]="賴"
    ["賽"]="賽"
    ["赢"]="贏"
    ["轟"]="轟"
    ["車"]="車"
    ["輪"]="輪"
    ["軟"]="軟"
    ["載"]="載"
    ["较"]="較"
    ["轻"]="輕"
    ["轉"]="轉"
    ["輛"]="輛"
    ["输"]="輸"
    ["辐"]="輻"
    ["輯"]="輯"
    ["辞"]="辭"
    ["辨"]="辨"
    ["辩"]="辯"
    ["边"]="邊"
    ["達"]="達"
    ["违"]="違"
    ["连"]="連"
    ["遲"]="遲"
    ["迅"]="迅"
    ["過"]="過"
    ["這"]="這"
    ["進"]="進"
    ["遠"]="遠"
    ["违"]="違"
    ["運"]="運"
    ["近"]="近"
    ["還"]="還"
    ["遷"]="遷"
    ["選"]="選"
    ["递"]="遞"
    ["逻"]="邏"
    ["途"]="途"
    ["逐"]="逐"
    ["透"]="透"
    ["逃"]="逃"
    ["逆"]="逆"
    ["逊"]="遜"
    ["遮"]="遮"
    ["避"]="避"
    ["邀"]="邀"
    ["邻"]="鄰"
    ["郑"]="鄭"
    ["部"]="部"
    ["配"]="配"
    ["酒"]="酒"
    ["酸"]="酸"
    ["醇"]="醇"
    ["醒"]="醒"
    ["采"]="採"
    ["釋"]="釋"
    ["里"]="裡"
    ["重"]="重"
    ["野"]="野"
    ["量"]="量"
    ["金"]="金"
    ["钱"]="錢"
    ["针"]="針"
    ["钓"]="釣"
    ["鐘"]="鐘"
    ["钢"]="鋼"
    ["鑽"]="鑽"
    ["鐵"]="鐵"
    ["铜"]="銅"
    ["银"]="銀"
    ["销"]="銷"
    ["锁"]="鎖"
    ["锋"]="鋒"
    ["錯"]="錯"
    ["錄"]="錄"
    ["锦"]="錦"
    ["键"]="鍵"
    ["链"]="鏈"
    ["锈"]="鏽"
    ["镜"]="鏡"
    ["長"]="長"
    ["門"]="門"
    ["闪"]="閃"
    ["闭"]="閉"
    ["问"]="問"
    ["聞"]="聞"
    ["闲"]="閒"
    ["間"]="間"
    ["闹"]="鬧"
    ["關"]="關"
    ["阅"]="閱"
    ["階"]="階"
    ["隊"]="隊"
    ["防"]="防"
    ["陽"]="陽"
    ["陰"]="陰"
    ["陳"]="陳"
    ["降"]="降"
    ["限"]="限"
    ["除"]="除"
    ["陪"]="陪"
    ["隨"]="隨"
    ["隐"]="隱"
    ["隔"]="隔"
    ["難"]="難"
    ["雨"]="雨"
    ["雪"]="雪"
    ["雷"]="雷"
    ["霧"]="霧"
    ["露"]="露"
    ["霞"]="霞"
    ["霸"]="霸"
    ["青"]="青"
    ["静"]="靜"
    ["面"]="面"
    ["革"]="革"
    ["韧"]="韌"
    ["音"]="音"
    ["響"]="響"
    ["頁"]="頁"
    ["顶"]="頂"
    ["項"]="項"
    ["順"]="順"
    ["须"]="須"
    ["预"]="預"
    ["領"]="領"
    ["频"]="頻"
    ["颗"]="顆"
    ["題"]="題"
    ["额"]="額"
    ["颜"]="顏"
    ["願"]="願"
    ["類"]="類"
    ["風"]="風"
    ["飛"]="飛"
    ["食"]="食"
    ["饭"]="飯"
    ["饮"]="飲"
    ["饱"]="飽"
    ["饿"]="餓"
    ["餐"]="餐"
    ["馆"]="館"
    ["首"]="首"
    ["香"]="香"
    ["马"]="馬"
    ["驻"]="駐"
    ["驱"]="驅"
    ["驶"]="駛"
    ["验"]="驗"
    ["騙"]="騙"
    ["骚"]="騷"
    ["體"]="體"
    ["高"]="高"
    ["髦"]="髦"
    ["鬼"]="鬼"
    ["魂"]="魂"
    ["魔"]="魔"
    ["魚"]="魚"
    ["鲜"]="鮮"
    ["鳥"]="鳥"
    ["雞"]="雞"
    ["鸣"]="鳴"
    ["鸭"]="鴨"
    ["鹅"]="鵝"
    ["鹤"]="鶴"
    ["鹰"]="鷹"
    ["鹿"]="鹿"
    ["麥"]="麥"
    ["麻"]="麻"
    ["黄"]="黃"
    ["黑"]="黑"
    ["默"]="默"
    ["鼓"]="鼓"
    ["鼠"]="鼠"
    ["鼻"]="鼻"
    ["齊"]="齊"
    ["齿"]="齒"
    ["龍"]="龍"
    ["龟"]="龜"
)

# 查找所有 JavaScript 文件
echo "📁 搜尋 JavaScript 檔案..."
js_files=$(find /home/ct/EBD_agv -name "*.js" -type f | grep -v node_modules | grep -v .git | head -100)

file_count=0
total_replacements=0

# 處理每個檔案
for file in $js_files; do
    if [[ -f "$file" ]]; then
        echo "🔍 處理檔案: $file"
        file_count=$((file_count + 1))
        
        # 為每個檔案執行所有替換
        for simplified in "${!char_map[@]}"; do
            traditional="${char_map[$simplified]}"
            
            # 檢查是否包含簡體字
            if grep -q "$simplified" "$file" 2>/dev/null; then
                echo "  ✏️  替換: $simplified -> $traditional"
                
                # 執行替換
                sed -i "s/$simplified/$traditional/g" "$file"
                total_replacements=$((total_replacements + 1))
            fi
        done
    fi
done

echo ""
echo "✅ 修復完成！"
echo "📊 統計信息:"
echo "   - 處理檔案數: $file_count"
echo "   - 總替換次數: $total_replacements"
echo ""
echo "🎯 主要修復內容:"
echo "   - 優化 -> 優化"
echo "   - 连接 -> 連接"
echo "   - 編輯 -> 編輯"
echo "   - 節點 -> 節點"
echo "   - 處理 -> 處理"
echo "   - 设置 -> 設置"
echo "   - 以及其他 ${#char_map[@]} 個字符映射"
echo ""
echo "🔧 建議接下來:"
echo "   1. 檢查修復結果: git diff"
echo "   2. 測試應用程式功能"
echo "   3. 如果滿意結果: git add . && git commit -m 'fix: 統一簡體中文字符為繁體中文'"