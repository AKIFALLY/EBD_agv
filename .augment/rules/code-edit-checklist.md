# RosAGV 程式碼編輯檢查清單

## 📋 編輯前檢查清單 (強制性)

### 🔍 文檔閱讀
- [ ] **閱讀目標工作空間的 README.md 檔案**
  - [ ] 📋 基本資訊 - 啟動狀態、運行環境、依賴狀態
  - [ ] 🔗 依賴關係 - 虛擬環境套件、系統套件、工作空間依賴
  - [ ] 🏗️ 專案結構 - 檔案組織、重要模組、棄用標記
  - [ ] ⚙️ 主要功能 - 核心功能、棄用功能、架構變更

### 🎯 程式碼角色確認
- [ ] **確認目標程式碼的系統角色**
  - [ ] 在整體系統中的定位
  - [ ] 與其他工作空間的整合關係
  - [ ] 是否使用虛擬環境套件
  - [ ] 是否為核心功能或輔助功能

### ⚠️ 風險評估
- [ ] **評估變更可能的影響範圍**
  - [ ] 可能影響的其他模組
  - [ ] 是否會影響啟動流程
  - [ ] 是否會改變依賴關係
  - [ ] 是否會影響 API 介面

## 📋 測試前檢查清單 (強制性)

### 🧪 測試準備
- [ ] **閱讀 README.md 測試方法章節**
  - [ ] 建置流程和依賴檢查
  - [ ] 虛擬環境套件測試方法 (如適用)
  - [ ] 功能測試步驟
  - [ ] 故障排除指南

### 🔧 環境準備
- [ ] **執行標準建置流程**
  ```bash
  cd /app/[workspace_name]
  colcon build
  source install/setup.bash
  ```

- [ ] **虛擬環境套件檢查** (如適用)
  ```bash
  /opt/pyvenv_env/bin/pip3 list | grep [package_name]
  python3 -c "import [package_name]; print('✅ 套件可用')"
  ```

- [ ] **依賴檢查**
  ```bash
  python3 -c "from [dependency].[module] import [class]; print('✅ 依賴正常')"
  ```

## 📋 編輯後檢查清單 (強制性)

### 📊 變更影響評估
- [ ] **是否新增或移除了虛擬環境套件依賴？**
- [ ] **是否改變了啟動方式或配置？**
- [ ] **是否修改了 API 介面或使用方法？**
- [ ] **是否新增了新的功能模組？**
- [ ] **是否棄用了現有功能？**
- [ ] **是否改變了與其他工作空間的整合方式？**
- [ ] **是否新增了配置檔案或參數？**
- [ ] **是否發現了新的故障排除方案？**

### 📝 文檔更新判斷
**必須更新 README.md 的情況** (任一項為 Yes):
- [ ] 依賴關係變更 (新增/移除套件、改變工作空間依賴)
- [ ] 功能變更 (新增功能、棄用功能、修改 API)
- [ ] 啟動配置變更 (啟動方式、配置參數、預設值)
- [ ] 架構變更 (檔案結構、模組重組、通訊協定)

**可選更新的情況**:
- [ ] 效能最佳化 (不影響介面)
- [ ] 程式碼重構 (不影響功能)
- [ ] 註解和文檔改善
- [ ] 測試案例新增

## 📋 文檔更新檢查清單

### 📝 更新前檢查
- [ ] **確認變更的具體內容和範圍**
- [ ] **識別受影響的 README.md 章節**
- [ ] **檢查是否需要更新多個工作空間的文檔**
- [ ] **確認新增內容符合專案標準**

### ✏️ 更新中檢查
- [ ] **使用正確的狀態標記** (✅/⚠️/❌)
- [ ] **標註虛擬環境套件使用**
- [ ] **標記棄用功能** (~~刪除線~~ ❌)
- [ ] **提供可執行的程式碼範例**
- [ ] **更新相關的交叉引用**

### ✅ 更新後檢查
- [ ] **驗證所有程式碼範例可執行**
- [ ] **檢查格式一致性**
- [ ] **確認技術資訊準確性**
- [ ] **驗證與其他文檔的一致性**

## 🎯 特殊情況快速指導

### 🔧 虛擬環境套件變更
**新增套件時更新**:
- [ ] 依賴關係章節
- [ ] 專案結構標註
- [ ] 主要功能說明
- [ ] 虛擬環境套件測試方法
- [ ] 故障排除方案

**移除套件時更新**:
- [ ] 標記為已移除 (~~刪除線~~ ❌)
- [ ] 說明移除原因
- [ ] 提供替代方案
- [ ] 更新測試方法

### 🚀 啟動狀態變更
**改為自動啟動時**:
- [ ] 更新基本資訊啟動狀態
- [ ] 修改使用方法章節
- [ ] 更新測試流程

**改為手動啟動時**:
- [ ] 更新啟動狀態標記
- [ ] 新增手動啟動方法
- [ ] 說明變更原因

### 🔄 架構重大變更
**功能遷移時** (如 MQTT → Web API):
- [ ] 新增架構變更說明章節
- [ ] 標記舊功能為已棄用
- [ ] 說明新架構優勢
- [ ] 提供遷移指導

## 📚 快速參考

### 常用狀態標記
- **✅ 實際啟動** - 容器啟動腳本中自動載入並執行
- **⚠️ 手動啟動** - 需要手動啟動
- **❌ 已棄用** - 功能已棄用

### 常用環境標記
- **🚗 AGV 車載系統** - AGV 車輛上運行
- **🖥️ AGVC 管理系統** - AGVC 管理電腦上運行
- **🚗🖥️ 共用** - 兩個環境都使用

### 虛擬環境套件檢查
```bash
# 檢查套件安裝
/opt/pyvenv_env/bin/pip3 list | grep [package_name]

# 測試套件功能
python3 -c "import [package_name]; print('✅ 可用')"
```

### 標準建置流程
```bash
cd /app/[workspace_name]
colcon build
source install/setup.bash
```

---

**使用說明**: 此檢查清單應在每次程式碼編輯時使用，確保文檔與程式碼保持同步。  
**配套文檔**: `.augment/rules/readme-reference.md` - 詳細作業流程  
**版本**: v1.0 | **更新**: 2025-01-17
