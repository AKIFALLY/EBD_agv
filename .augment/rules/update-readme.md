---
type: "manual"
---

# RosAGV 專案 README.md 標準化規則

## 📋 規則概述

本規則適用於 ROS 2 專案工作空間的 README.md 標準化更新，確保產生與 RosAGV 專案相同品質的技術文檔。

**目標**: 讓任何 AI 助理都能按照此規則產生完整、準確、實用的技術文檔
**適用範圍**: ROS 2 工作空間、獨立專案、技術模組
**品質標準**: 技術準確性 100%、格式一致性 100%、可執行性 100%

## 🎯 核心原則

1. **技術準確性優先**: 所有資訊必須基於實際程式碼分析，禁止推測或假設
2. **可執行性保證**: 所有 API 範例和測試指令都必須可實際執行
3. **格式一致性**: 嚴格遵循統一的文檔結構和格式標準
4. **實用性導向**: 提供完整的開發、測試、維護指導
5. **依賴關係準確**: 精確標記套件類型和工作空間依賴關係

## 📋 標準化章節結構

### 必要章節 (按順序)
1. **標題** - `# 工作空間名稱 (workspace_name)`
2. **📋 基本資訊** - 啟動狀態、運行環境、主要功能、依賴狀態
3. **📋 專案概述** - 功能描述、重要說明、系統定位
4. **🔗 依賴關係** - 虛擬環境套件、系統套件、工作空間依賴
5. **🏗️ 專案結構** - 檔案樹狀圖，標示重要檔案
6. **⚙️ 主要功能** - 核心功能模組說明
7. **🔧 核心 API** - 程式碼範例和 API 使用方法
8. **🚀 使用方法** - 建置、啟動、測試步驟
9. **🧪 測試方法** - 建置測試、功能測試、整合測試
10. **🔧 故障排除** - 常見問題和解決方案
11. **🔗 相關文檔** - 相關工作空間和外部文檔連結
12. **📋 ToDo 清單** - 高中低優先級任務和里程碑

### 可選章節
- **📡 訊息介面** - ROS 2 訊息定義 (如有自定義訊息)
- **🔄 架構變更說明** - 重大架構變更的說明 (如 MQTT → Web API)
- **📊 監控和分析** - 效能監控相關內容
- **📝 開發指南** - 開發相關指導
- **🔧 維護注意事項** - 維護相關注意事項

## 🏷️ 啟動狀態標記規範

### 標準格式
- `**啟動狀態**: [狀態圖示] [狀態描述] ([詳細說明])`

### 狀態圖示定義
- **✅ 實際啟動** - 容器啟動腳本中自動載入並執行
- **✅ 自動載入** - 容器啟動腳本中自動載入但不執行特定節點
- **⚠️ 手動啟動** - 未在容器啟動腳本中，需要手動啟動
- **⚠️ 部分啟動** - 部分功能自動啟動，部分需要手動啟動
- **❌ 未啟動** - 完全未在啟動腳本中
- **❌ 已棄用** - 功能已棄用或不再使用

### 運行環境標記
- **🚗 AGV 車載系統** - 主要在 AGV 車輛上運行
- **🖥️ AGVC 管理系統** - 主要在 AGVC 管理電腦上運行
- **🚗🖥️ 共用** - 兩個環境都會使用

#### 🏗️ 專案結構
**格式要求**:
- 使用樹狀圖格式展示檔案結構
- 標示重要檔案的功能說明
- 標記實作狀態（完整實作、部分實作、基礎架構）
- 標示套件類型（僅系統套件、虛擬環境套件）

#### ⚙️ 主要功能
**內容組織**:
- 按功能模組分組說明
- 每個模組包含核心功能點
- 標示技術特點和實作狀態
- 包含重要的常數定義和配置

#### 🔧 核心 API
**必須包含**:
- 實際可執行的程式碼範例
- 基於實際類別和方法的 API 使用
- 包含 import 語句和初始化
- 提供預期的輸出結果

#### 🧪 測試方法
**必須包含的測試類別**:
1. 建置和測試
2. 系統套件測試
3. 虛擬環境套件測試（如適用）
4. 模組功能測試
5. 整合測試

#### 🚀 使用方法
**標準步驟**:
1. 建置工作空間
2. 啟動服務（自動或手動）
3. 檢查狀態
4. 監控和測試
5. 停止服務

#### 🔧 故障排除
**必須包含的問題類別**:
1. 套件相關問題
2. 啟動失敗問題
3. 依賴關係問題
4. 連線或通訊問題

#### 📋 ToDo 清單
**必須包含的優先級分類**:
- 🔴 高優先級 (緊急)
- 🟡 中優先級 (重要)
- 🟢 低優先級 (改善)
- 🔧 技術債務
- 📊 完成度追蹤
- 🎯 里程碑
- 🏆 重要成就

## 🔍 更新前檢查清單

### 1. 程式碼分析 (必要)
- 使用 `codebase-retrieval` 工具分析工作空間
- 查詢內容: "分析 [workspace_name] 工作空間的詳細程式碼結構、主要模組、依賴關係、啟動狀態、使用的套件類型（系統套件或虛擬環境套件）、與其他工作空間的整合關係"

### 2. 啟動狀態確認
- 檢查 `startup.agv.bash` - AGV 車載系統啟動腳本
- 檢查 `startup.agvc.bash` - AGVC 管理系統啟動腳本
- 檢查 `setup.bash` - 統一環境腳本

### 3. 虛擬環境套件檢查
- 搜尋 `import` 語句中的虛擬環境套件
- 檢查 `requirements.txt` 或 `setup.py` 中的依賴
- 確認套件安裝位置 (`/opt/pyvenv_env`)

### 4. 依賴關係分析
- **向上依賴**: 本工作空間使用哪些其他工作空間
- **向下依賴**: 哪些工作空間使用本工作空間
- **外部依賴**: 資料庫、硬體、網路服務等

## 📝 內容撰寫規範

### 基本資訊區塊格式
```markdown
**啟動狀態**: [狀態標記]
**運行環境**: [環境標記]
**主要功能**: [簡潔功能描述]
**依賴狀態**: [依賴摘要，特別標註虛擬環境套件]
**[特殊狀態]**: [如手動啟動方法、重要變更等]
```

### 專案概述撰寫要點
- 第一段：核心功能和定位
- 第二段：技術特點和實作方式
- 第三段：在系統中的角色和重要性
- 特殊說明：重要變更、棄用功能、開發狀態等

### 依賴關係章節結構
```markdown
### 虛擬環境套件依賴 (如有)
- **套件名稱**: 功能說明

### 系統套件依賴
- **套件名稱**: 功能說明

### 依賴的工作空間
- **工作空間名稱**: 使用的功能 (啟動狀態標記)

### 被依賴的工作空間
- **工作空間名稱**: 提供的功能

### 外部依賴
- **依賴名稱**: 連線資訊和用途
```

### 專案結構撰寫要點
- 使用樹狀圖格式展示檔案結構
- 標示重要檔案的功能說明
- 標記虛擬環境套件的使用位置
- 標示棄用檔案 (使用 ~~刪除線~~)

### 主要功能章節格式
- 按功能模組分組說明
- 每個模組包含核心功能點
- 標示虛擬環境套件的使用
- 標記棄用功能 (❌ 已棄用)

---

## 🔧 **第三階段：內容品質標準**

### 3.1 技術準確性保證

**API 範例可執行性驗證**:
- ✅ 所有 import 語句基於實際程式碼
- ✅ 類別名稱和方法名稱來自實際實作
- ✅ 參數和返回值符合實際 API
- ✅ 範例程式碼可以直接執行

**測試方法完整性檢查**:
- ✅ 建置指令可實際執行
- ✅ 測試指令有效且完整
- ✅ 包含預期的輸出結果
- ✅ 涵蓋主要功能模組

**故障排除實用性要求**:
- ✅ 問題症狀描述準確
- ✅ 解決方案可實際執行
- ✅ 診斷指令有效
- ✅ 涵蓋常見問題場景

### 3.2 ToDo 清單基於實際程式碼分析標準

**已完成項目標記**:
- 基於實際程式碼分析確定完成狀態
- 使用 ✅ 標記已完成項目
- 提供具體的完成度百分比

**待辦項目制定**:
- 基於實際缺失功能制定
- 提供具體的實作時間估計
- 按優先級分類組織

**里程碑規劃**:
- v1.0.0: 基於當前實作狀態
- v1.1.0: 短期改進目標
- v2.0.0: 長期發展規劃

### 3.3 一致性保證標準

**工作空間分類一致性**:
- 使用統一的環境標記（🚗🖥️🔧）
- 保持分類邏輯一致
- 確保描述風格統一

**跨工作空間依賴關係標記**:
- 使用統一的依賴關係格式
- 標記啟動狀態（✅⚠️）
- 保持引用的準確性

**完成度評估統一格式**:
- 使用統一的百分比標記
- 保持評估標準一致
- 提供具體的評估依據

---

## 🛠️ **第四階段：可操作性工作流程**

### 4.1 具體工作流程步驟

#### 步驟 1: 深度程式碼分析
1. **執行 codebase-retrieval 查詢**
   ```
   分析 [工作空間名稱] 工作空間的詳細程式碼結構、主要模組、實際實作狀態、啟動狀態、使用的套件類型（系統套件或虛擬環境套件）、與其他工作空間的整合關係
   ```

2. **確認啟動狀態**
   - 檢查 `startup.agv.bash` 和 `startup.agvc.bash`
   - 搜尋工作空間名稱在啟動腳本中的出現
   - 確定自動啟動 vs 手動啟動

3. **分析套件依賴**
   - 檢查 Python import 語句
   - 識別虛擬環境套件 vs 系統套件
   - 分析 setup.py 和 package.xml

#### 步驟 2: 建立文檔結構
1. **撰寫基本資訊區塊**
   - 確定啟動狀態標記
   - 識別運行環境分類
   - 總結主要功能
   - 標註依賴狀態

2. **撰寫專案概述**
   - 系統定位描述
   - 技術特點說明
   - 重要特點總結

3. **分析依賴關係**
   - 系統套件依賴
   - 虛擬環境套件依賴
   - 工作空間依賴
   - 外部依賴

#### 步驟 3: 內容撰寫
1. **專案結構圖**
   - 基於實際檔案結構
   - 標示重要檔案功能
   - 標記實作狀態

2. **主要功能說明**
   - 按模組分組
   - 基於實際程式碼
   - 包含技術細節

3. **API 範例撰寫**
   - 使用實際類別和方法
   - 提供可執行範例
   - 包含預期輸出

#### 步驟 4: 品質檢查
1. **技術準確性驗證**
2. **格式一致性檢查**
3. **內容完整性確認**
4. **可執行性測試**

## 🧪 測試方法標準格式

### 4.2 標準測試方法格式

#### 建置和測試 (正確的環境載入)
```bash
# 載入 ROS 2 環境並建置
source /opt/ros/jazzy/setup.bash && source /opt/ws_rmw_zenoh/install/setup.bash && cd /app/[workspace_name] && colcon build
source install/setup.bash

# 執行測試
colcon test
colcon test-result --verbose
```

#### 系統套件測試
```bash
python3 -c "
import rclpy
print('✅ rclpy 可用')
print(f'rclpy 位置: {rclpy.__file__}')
"
```

#### 虛擬環境套件測試 (如適用)
```bash
# 使用虛擬環境的 Python
/opt/pyvenv_env/bin/python3 -c "
import [package_name]
print('✅ [package_name] 可用')
print(f'[package_name] 位置: {[package_name].__file__}')
"
```

#### 模組功能測試
```bash
python3 -c "
from [workspace_name].[module] import [class]
print('✅ [module] 模組載入成功')
"
```

#### ROS 2 節點測試
```bash
ros2 run [workspace_name] [node_name] &
sleep 5
ros2 node list | grep [node_name]
ros2 node info /[node_name]
pkill -f [node_name]
```

### 4.3 標準故障排除格式

#### 問題分類和格式
```markdown
#### 1. [問題類型]
**症狀**: [具體症狀描述]
**解決方法**:
```bash
# 診斷指令
[diagnostic_command]

# 解決方案
[solution_commands]
```
```

#### 必須包含的問題類別
1. **套件安裝問題** - ModuleNotFoundError 等
2. **啟動失敗問題** - 節點或服務無法啟動
3. **依賴關係問題** - 工作空間載入失敗
4. **連線問題** - 網路、資料庫、硬體連線

### 4.4 標準配置說明格式

#### 參數配置
```python
# 預設配置
DEFAULT_CONFIG = {
    "parameter_name": "default_value",
    "description": "parameter description"
}
```

#### 環境變數
```bash
# 環境變數設定
export VARIABLE_NAME="value"
```

#### 系統需求
```bash
# 系統需求
OS: Ubuntu 24.04 或相容版本
Python: 3.12 或更新版本
ROS 2: Jazzy 或相容版本
```

---

## ✅ **第五階段：品質檢查和驗證**

### 5.1 品質檢查驗證清單

#### 技術準確性檢查
- [ ] 所有 API 方法和類別來自實際程式碼
- [ ] 虛擬環境套件使用基於實際 import 分析
- [ ] 依賴關係來自實際的 package.xml 和 setup.py
- [ ] 啟動狀態與實際腳本一致
- [ ] 配置檔案路徑和參數正確
- [ ] 網路位址和埠號準確

#### 格式一致性檢查
- [ ] 章節結構符合標準模板
- [ ] 狀態標記使用正確圖示
- [ ] 程式碼區塊格式正確
- [ ] 連結和引用有效
- [ ] 表格格式統一
- [ ] 清單項目格式一致

#### 內容完整性檢查
- [ ] 所有必要章節都已包含
- [ ] 虛擬環境套件正確標記
- [ ] 依賴關係完整且準確
- [ ] 測試方法可執行
- [ ] 故障排除涵蓋主要問題
- [ ] ToDo 清單具體可行

#### 可執行性驗證
- [ ] 所有程式碼範例可以實際執行
- [ ] 測試指令有效且完整
- [ ] 故障排除方案可實際操作
- [ ] 配置範例正確有效

### 5.2 錯誤修正和內容更新標準程序

#### 常見錯誤類型和修正方法

**1. 虛擬環境套件遺漏**
- 錯誤：未正確識別虛擬環境套件
- 修正：重新分析 import 語句，檢查 `/opt/pyvenv_env` 路徑

**2. 啟動狀態錯誤**
- 錯誤：與實際腳本不符
- 修正：重新檢查 `startup.agv.bash` 和 `startup.agvc.bash`

**3. 依賴關係不完整**
- 錯誤：遺漏重要依賴或依賴方向錯誤
- 修正：重新分析工作空間間的實際依賴關係

**4. API 範例錯誤**
- 錯誤：無法執行的範例或過時的 API
- 修正：基於實際程式碼重新撰寫範例

#### 內容更新程序
1. **識別需要更新的內容**
2. **重新執行程式碼分析**
3. **更新相關章節**
4. **執行品質檢查**
5. **驗證修正結果**

### 5.3 成功標準定義

#### 優秀 README.md 特徵
- **完整性**: 包含所有必要資訊，無遺漏重要功能
- **準確性**: 技術資訊基於實際程式碼，可執行的範例
- **實用性**: 包含可執行的範例和測試，解決實際問題
- **一致性**: 格式和風格統一，與專案整體一致
- **可維護性**: 易於更新和擴展，結構清晰
- **可讀性**: 邏輯清晰，層次分明，易於理解

#### 品質檢查通過標準
- [ ] 技術資訊準確無誤
- [ ] 格式符合專案標準
- [ ] 與其他文檔保持一致
- [ ] 交叉引用正確有效
- [ ] 可讀性和可維護性良好
- [ ] 所有範例和指令可執行

---

## 📚 **參考範例和模板**

### 6.1 優秀 README.md 範例分析

#### **虛擬環境套件使用典範**: `db_proxy_ws/README.md`
- ✅ 完整的 SQLAlchemy/SQLModel 使用說明
- ✅ 詳細的資料庫操作 API 範例
- ✅ 虛擬環境套件測試方法
- ✅ 基於實際程式碼的 ORM 模型說明

#### **複雜系統架構說明典範**: `agv_ws/README.md`
- ✅ 多層狀態管理架構詳細說明
- ✅ 完整的車型配置和啟動狀態
- ✅ 詳細的訊息介面定義
- ✅ 雙層狀態管理架構圖

#### **系統套件使用典範**: `keyence_plc_ws/README.md`
- ✅ 純系統套件依賴標記
- ✅ 完整的 PLC 通訊 API 使用範例
- ✅ 詳細的記憶體管理說明
- ✅ 實際可執行的測試方法

#### **架構變更說明典範**: `ecs_ws/README.md`
- ✅ MQTT 功能棄用標記和說明
- ✅ 新舊架構對比和遷移指導
- ✅ 完整的變更歷史記錄
- ✅ 向後相容性說明

#### **硬體整合典範**: `uno_gpio_ws/README.md`
- ✅ 非 ROS 2 專案的標準化處理
- ✅ 硬體特定配置和對應表
- ✅ C 和 Python 雙語言支援
- ✅ 完整的硬體故障排除

### 6.2 模板選擇指導

#### 根據工作空間特性選擇範例
1. **虛擬環境套件工作空間** → 參考 `db_proxy_ws`
2. **複雜系統架構工作空間** → 參考 `agv_ws`
3. **純系統套件工作空間** → 參考 `keyence_plc_ws`
4. **有架構變更的工作空間** → 參考 `ecs_ws`
5. **硬體整合專案** → 參考 `uno_gpio_ws`

#### 保持一致性原則
- 使用標準章節結構
- 保持格式和風格統一
- 適應特殊需求但不偏離標準
- 確保符合品質檢查標準

### 6.3 工作空間分類參考

#### 虛擬環境套件使用工作空間
- `db_proxy_ws` - sqlalchemy, psycopg2, sqlmodel
- `path_algorithm` - networkx
- `web_api_ws` - fastapi, uvicorn, sqlalchemy
- `ecs_ws` - ~~paho-mqtt~~ (已棄用)

#### 系統套件使用工作空間
- `keyence_plc_ws` - 純 Python 標準庫和 ROS 2
- `plc_proxy_ws` - ROS 2 和 keyence_plc 依賴
- `agv_cmd_service_ws` - ROS 2 和 plc_proxy 依賴
- `joystick_ws` - ROS 2 joy_linux
- `agv_ws` - ROS 2 和多工作空間依賴
- `sensorpart_ws` - Python 標準庫和 ROS 2
- `rcs_ws` - ROS 2 和系統套件
- `wcs_ws` - ROS 2 和系統套件
- `kuka_fleet_ws` - ROS 2 和 HTTP 客戶端
- `launch_ws` - ROS 2 Launch 系統

---

## 📋 **快速檢查清單**

### 更新前檢查
- [ ] 執行 codebase-retrieval 深度分析
- [ ] 檢查啟動腳本確認啟動狀態
- [ ] 識別虛擬環境套件使用情況
- [ ] 分析工作空間依賴關係
- [ ] 檢查現有 README.md 內容

### 更新中檢查
- [ ] 基本資訊區塊完整且準確
- [ ] 專案概述反映實際功能
- [ ] 依賴關係完整且正確標記
- [ ] 專案結構基於實際檔案
- [ ] 主要功能基於實際程式碼
- [ ] 核心 API 範例可執行
- [ ] 使用方法步驟清晰
- [ ] 測試方法有效完整
- [ ] 故障排除實用有效
- [ ] 配置說明準確詳細
- [ ] ToDo 清單基於實際分析

### 更新後檢查
- [ ] 技術準確性 100% 驗證通過
- [ ] 格式一致性符合標準
- [ ] 內容完整性無遺漏
- [ ] 可執行性全面驗證
- [ ] 交叉引用正確有效
- [ ] 與其他文檔風格一致

---

## 🎯 **成功標準總結**

### 文檔同步成功的指標
- ✅ 所有程式碼變更都有對應的文檔更新
- ✅ 虛擬環境套件使用正確標記
- ✅ 啟動狀態與實際情況一致
- ✅ API 範例可以實際執行
- ✅ 測試方法有效且完整
- ✅ 故障排除指南實用

### 品質檢查通過標準
- ✅ 技術資訊準確無誤
- ✅ 格式符合專案標準
- ✅ 與其他文檔保持一致
- ✅ 交叉引用正確有效
- ✅ 可讀性和可維護性良好

### 特殊情況處理標準
- **棄用功能**: 使用 ~~刪除線~~ 和 ❌ 標記
- **開發中功能**: 使用 🚧 標記和詳細說明
- **架構變更**: 新增專門的架構變更說明章節
- **虛擬環境套件**: 明確標記和測試方法
- **手動啟動**: 提供詳細的啟動方法和檢查步驟
- **非 ROS 2 專案**: 適當調整結構但保持標準格式

---

## 📝 **使用說明**

### 對 AI 助理的指導
1. **嚴格遵循此規則**: 每個步驟都必須按照規定執行
2. **禁止推測**: 所有資訊必須基於實際程式碼分析
3. **保證可執行性**: 所有範例和指令都必須可實際執行
4. **維持一致性**: 格式和風格必須與現有文檔一致
5. **完整性檢查**: 使用檢查清單確保無遺漏

### 適用專案類型
- ✅ ROS 2 工作空間
- ✅ 獨立 Python 專案
- ✅ 硬體整合專案
- ✅ Web 服務專案
- ✅ 演算法模組
- ✅ 工具和腳本專案

### 品質保證
遵循此規則產生的 README.md 將具備：
- **100% 技術準確性**
- **100% 格式一致性**
- **100% 可執行性**
- **完整的開發指導**
- **實用的維護指南**
- **專業的技術文檔品質**

---

**版本**: v2.0 | **更新**: 2025-01-17 | **範圍**: 適用於所有 ROS 2 專案和技術模組
**基於**: RosAGV 專案 15 個工作空間標準化成功經驗
**品質保證**: 技術準確性 100%、格式一致性 100%、可執行性 100%

---

## 🎉 **結語**

此規則基於 RosAGV 專案所有 15 個工作空間的成功標準化經驗制定，確保任何 AI 助理都能按照相同的方法和標準，為任何 ROS 2 專案產生高品質的 README.md 文檔。

**遵循此規則將產生**:
- ✅ 完整且準確的技術文檔
- ✅ 統一且專業的格式風格
- ✅ 實用且可執行的開發指導
- ✅ 詳細且有效的故障排除方案
- ✅ 基於實際程式碼的準確資訊

**讓每個技術專案都擁有世界級的文檔品質！** 🚀