# 📚 AGVCUI 項目文檔

這個資料夾包含了 AGVCUI 項目的所有文檔、改進記錄和測試腳本。

## 📁 資料夾結構

```
docs/
├── README.md                    # 本文檔
├── improvements/               # 改進和功能開發文檔
│   ├── batch_update_remaining_pages.py
│   └── ...
├── testing/                   # 測試腳本和調試工具
│   ├── debug_*.py
│   ├── test_*.py
│   └── ...
└── summaries/                 # 總結和說明文檔
    ├── *.md
    └── ...
```

## 🎯 主要改進項目

### 1. 認證和權限系統
- **文檔**: `summaries/PERMISSION_SYSTEM_IMPLEMENTATION.md`
- **功能**: 完整的用戶認證、角色管理、權限控制
- **狀態**: ✅ 完成

### 2. 用戶管理系統
- **文檔**: `summaries/USER_EDIT_FIX_SUMMARY.md`
- **功能**: 管理員可以創建、編輯、刪除用戶
- **狀態**: ✅ 完成

### 3. 表格風格統一
- **文檔**: `summaries/TABLE_STYLE_IMPROVEMENT_SUMMARY.md`
- **功能**: 統一所有頁面的表格風格和分頁
- **狀態**: ✅ 完成

### 4. Navbar 用戶信息顯示
- **文檔**: `summaries/NAVBAR_USER_INFO_FIX.md`
- **功能**: 修復用戶信息在導航欄的顯示
- **狀態**: ✅ 完成

### 5. 登出安全修復
- **文檔**: `summaries/LOGOUT_SECURITY_FIX.md`
- **功能**: 修復登出後仍能訪問頁面的安全問題
- **狀態**: ✅ 完成

## 🧪 測試工具

### 調試腳本
- `testing/debug_user_display.py` - 調試用戶顯示問題
- `testing/test_logout_issue.py` - 測試登出功能
- `testing/test_user_display_fix.py` - 測試用戶顯示修復

### 批量更新工具
- `improvements/batch_update_remaining_pages.py` - 批量更新頁面風格

## 📊 完成狀態

### ✅ 已完成的頁面風格統一
1. **設備管理** (`/devices`) - 完全改進
2. **任務管理** (`/tasks`) - 完全改進
3. **信號管理** (`/signals`) - 完全改進
4. **載具管理** (`/carriers`) - 完全改進
5. **客戶端管理** (`/clients`) - 完全改進
6. **貨架管理** (`/racks`) - 完全改進
7. **產品管理** (`/products`) - 完全改進
8. **用戶管理** (`/users`) - 完全改進

### 🔄 日誌頁面（保持簡潔）
- **ROS 日誌** (`/rosout_logs`) - 只需要基本風格
- **運行日誌** (`/runtime_logs`) - 只需要基本風格

## 🎨 統一風格特點

### 1. 頁面布局
- 使用 `level` 布局（標題在左，操作按鈕在右）
- 表格包裹在 `box` 中增加視覺層次

### 2. 狀態顯示
- 使用彩色標籤 (tags) 顯示狀態
- 統一的顏色規範：
  - `is-success`: 成功、啟用、正常
  - `is-warning`: 警告、待處理、使用中
  - `is-danger`: 錯誤、停用、故障
  - `is-info`: 信息、ID 值
  - `is-primary`: 主要信息
  - `is-light`: 未設置、空值

### 3. 權限控制
- **未登入用戶**: 只能查看
- **用戶 (user)**: 只能查看
- **操作員 (operator)**: 可以創建、編輯
- **管理員 (admin)**: 完整權限，包括刪除

### 4. 分頁功能
- 統一的分頁邏輯
- 只在有多頁時顯示
- 簡潔的頁碼顯示

### 5. 操作按鈕
- 編輯按鈕：藍色 (`is-info`)
- 刪除按鈕：紅色 (`is-danger`)
- 新增按鈕：主色 (`is-primary`)
- 刪除操作有確認對話框

## 🔐 安全特性

### 認證系統
- JWT token 認證
- HttpOnly cookies
- 30 分鐘過期時間
- 安全的密碼哈希 (PBKDF2)

### 權限控制
- 頁面級別權限檢查
- 操作級別權限控制
- 前後端雙重驗證

### 安全修復
- 修復登出後仍能訪問的問題
- 強化 cookie 刪除機制
- 添加詳細的安全日誌

## 🚀 使用指南

### 開發環境設置
1. 確保所有依賴已安裝
2. 初始化管理員帳號：訪問 `/init-admin`
3. 使用 `admin` / `admin123` 登入

### 測試流程
1. 運行測試腳本驗證功能
2. 檢查所有頁面的風格一致性
3. 測試權限控制是否正常
4. 驗證分頁功能

### 維護指南
- 新增頁面時使用統一的風格模板
- 確保權限檢查正確實施
- 保持文檔更新

## 📝 更新日誌

### 2024-12-XX
- ✅ 完成所有主要頁面的風格統一
- ✅ 實施完整的權限控制系統
- ✅ 修復所有已知的安全問題
- ✅ 整理項目文檔結構

---

**項目狀態**: 🎉 主要功能開發完成
**文檔維護**: 📚 持續更新中
