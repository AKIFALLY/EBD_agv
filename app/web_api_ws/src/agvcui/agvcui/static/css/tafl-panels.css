/**
 * TAFL Panels 樣式表
 * 所有面板的風格都在這裡調整
 * 修改這個檔案就能改變所有面板的外觀
 */

/* ============================================
   面板容器基礎樣式
   ============================================ */

.panel-content {
    background: white;
    border-radius: 6px;
    padding: 1.25rem;
    margin-bottom: 1rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* 面板標題 */
.panel-content .title.is-4 {
    margin-bottom: 0.5rem;
    color: #363636;
    font-size: 1.25rem;
}

/* 面板描述 */
.panel-content .panel-description {
    color: #7a7a7a;
    font-size: 0.875rem;
    margin-bottom: 1rem;
}

/* 面板主體 */
.panel-content .panel-body {
    padding: 0;
}

/* ============================================
   欄位樣式
   ============================================ */

/* 基本欄位 */
.panel-body .field {
    margin-bottom: 1rem;
}

.panel-body .field:last-child {
    margin-bottom: 0;
}

/* 欄位標籤 */
.panel-body .label {
    color: #363636;
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

/* 輸入框樣式 */
.panel-body .input,
.panel-body .textarea {
    border: 1px solid #dbdbdb;
    border-radius: 4px;
    padding: 0.625rem 0.75rem;
    font-size: 1rem;
    width: 100%;
    transition: border-color 0.2s, box-shadow 0.2s;
}

.panel-body .input:hover,
.panel-body .textarea:hover {
    border-color: #b5b5b5;
}

.panel-body .input:focus,
.panel-body .textarea:focus {
    border-color: #3273dc;
    box-shadow: 0 0 0 0.125em rgba(50, 115, 220, 0.25);
    outline: none;
}

/* 數字輸入框 */
.panel-body input[type="number"] {
    max-width: 200px;
}

/* 核取方塊 */
.panel-body .checkbox {
    display: flex;
    align-items: center;
    cursor: pointer;
}

.panel-body .checkbox input[type="checkbox"] {
    margin-right: 0.5rem;
    cursor: pointer;
}

/* ============================================
   變數面板樣式
   ============================================ */

.variables-list .box {
    margin-bottom: 0.75rem;
    padding: 1rem;
    /* Remove default shadow, only show on hover */
    box-shadow: none;
    border: none;
    transition: box-shadow 0.3s ease;
}

.variables-list .box:hover {
    box-shadow: 0 2px 3px rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.1);
}

.variables-list .box:last-child {
    margin-bottom: 0;
}

.variables-list .heading {
    color: #7a7a7a;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.25rem;
}

/* ============================================
   規則面板樣式
   ============================================ */

.rules-list .box {
    margin-bottom: 0.75rem;
    padding: 1rem;
    /* Remove default shadow, only show on hover */
    box-shadow: none;
    border: none;
    transition: box-shadow 0.3s ease;
}

.rules-list .box:hover {
    box-shadow: 0 2px 3px rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.1);
}

.rules-list .box:last-child {
    margin-bottom: 0;
}

.rules-list .heading {
    color: #7a7a7a;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.25rem;
}

.rules-list pre.content {
    /* Removed custom styles to match standard appearance */
    /* background: white; */
    padding: 0.5rem;
    border-radius: 4px;
    /* border: 1px solid #e0e0e0; */
    font-size: 0.875rem;
    margin: 0;
    white-space: pre-wrap;
    word-break: break-word;
}

/* Rules Panel Text Wrapping (moved from tafl-editor.css) */
#rules-list .level {
    flex-wrap: wrap;
    align-items: flex-start;
}

#rules-list .level-left {
    flex-wrap: wrap;
    flex: 1;
    min-width: 0;
}

#rules-list .level-item {
    margin-bottom: 0.5rem;
}

#rules-list .title.is-7 {
    word-wrap: break-word;
    word-break: break-word;
    white-space: normal;
    max-width: 200px;
}

#rules-list .level-right {
    flex-shrink: 0;
    margin-left: auto;
    margin-top: 0.5rem;
}

/* ============================================
   按鈕樣式
   ============================================ */

/* 主要按鈕 (新增) */
.panel-block .button.is-primary {
    background-color: #00d1b2;
    border-color: transparent;
    color: white;
    height: 40px;
    font-weight: 500;
    transition: background-color 0.2s;
}

.panel-block .button.is-primary:hover {
    background-color: #00c4a7;
}

/* 危險按鈕 (刪除) */
.button.is-danger {
    background-color: #f14668;
    border-color: transparent;
    color: white;
    transition: background-color 0.2s;
}

.button.is-danger:hover {
    background-color: #ef2e55;
}

/* 資訊按鈕 (編輯) */
.button.is-info {
    background-color: #3298dc;
    border-color: transparent;
    color: white;
    transition: background-color 0.2s;
}

.button.is-info:hover {
    background-color: #2793da;
}

/* 小按鈕 */
.button.is-small {
    font-size: 0.75rem;
    height: 28px;
    padding: 0 0.75rem;
}

/* 按鈕圖示 */
.button .icon {
    width: 1.5em;
    height: 1.5em;
}

.button .icon:first-child:not(:last-child) {
    margin-right: 0.25rem;
}

/* ============================================
   特定面板自訂樣式
   ============================================ */

/* Metadata 面板 */
#metadata-panel .input[readonly] {
    background-color: #f5f5f5;
    cursor: not-allowed;
}

/* Settings 面板 */
#settings-panel input[type="number"] {
    width: 120px;
}

/* Variables 面板 */

/* Variables 面板 - 移除了 hover 效果 */

/* Preload 面板 box hover 效果 */
.preload-list .box {
    box-shadow: none;
    border: none;
    transition: box-shadow 0.3s ease;
}

.preload-list .box:hover {
    box-shadow: 0 2px 3px rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.1);
}

/* Rules 面板 */

/* Properties 面板 */
#properties-panel .properties-content {
    padding: 0.5rem;
    background: #fafafa;
    border-radius: 4px;
}

/* ============================================
   響應式調整
   ============================================ */

@media (max-width: 768px) {
    .panel-content {
        padding: 1rem;
        margin-bottom: 0.75rem;
    }
    
    .panel-content .title.is-4 {
        font-size: 1.125rem;
    }
    
    .panel-body .input,
    .panel-body .textarea {
        font-size: 0.875rem;
        padding: 0.5rem 0.625rem;
    }
}

/* ============================================
   CodeMirror 整合樣式
   ============================================ */

/* CodeMirror 編輯器容器 */
.control .CodeMirror {
    font-size: 0.875rem;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
}

/* CodeMirror 錯誤狀態 */
.control .has-error {
    border-color: #f14668 !important;
    box-shadow: 0 0 0 0.125em rgba(241, 70, 104, 0.25);
}

/* CodeMirror 高度調整 */
.panel-body .CodeMirror {
    min-height: 80px;
    max-height: 200px;
}

/* ============================================
   動畫效果
   ============================================ */

/* 面板出現動畫 */
.panel-content {
    animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* 項目刪除動畫 */
.panel-block.removing {
    animation: slideOut 0.3s ease-in-out;
}

@keyframes slideOut {
    to {
        opacity: 0;
        transform: translateX(-20px);
        height: 0;
        padding: 0;
        margin: 0;
    }
}

/* ============================================
   深色主題 (可選)
   ============================================ */

body.dark-theme .panel-content {
    background: #2b2b2b;
    color: #e0e0e0;
}

body.dark-theme .panel-content .title.is-4 {
    color: #e0e0e0;
}

body.dark-theme .panel-content .panel-description {
    color: #a0a0a0;
}

body.dark-theme .panel-body .label {
    color: #e0e0e0;
}

body.dark-theme .panel-body .input,
body.dark-theme .panel-body .textarea {
    background: #1e1e1e;
    border-color: #404040;
    color: #e0e0e0;
}

body.dark-theme .panel-body .input:hover,
body.dark-theme .panel-body .textarea:hover {
    border-color: #505050;
}

body.dark-theme .panel-body .input:focus,
body.dark-theme .panel-body .textarea:focus {
    border-color: #4a90e2;
    box-shadow: 0 0 0 0.125em rgba(74, 144, 226, 0.25);
}

body.dark-theme .rules-list .box {
    background: #1e1e1e;
    border-color: #404040;
}

body.dark-theme .rules-list pre.content {
    background: #2b2b2b;
    border-color: #404040;
    color: #e0e0e0;
}

/* ============================================
   Property Editor 樣式 (從 tafl-editor.css 移動)
   ============================================ */

/* Property Editor Container */
.property-editor {
    padding: 1rem;
}

.property-editor .title {
    margin-bottom: 1.5rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid #e1e4e8;
}

/* Property field styling */
.property-editor .field {
    margin-bottom: 1rem;
}

.property-editor .field .label {
    font-size: 0.875rem;
    font-weight: 600;
    color: #363636;
    margin-bottom: 0.5rem;
}

.property-editor .field .help {
    font-size: 0.75rem;
    color: #6b7280;
    margin-top: 0.25rem;
}

/* Checkbox styling */
.property-editor .checkbox {
    display: flex;
    align-items: center;
    cursor: pointer;
}

.property-editor .checkbox input[type="checkbox"] {
    margin-right: 0.5rem;
}

.property-editor .checkbox span {
    font-size: 0.875rem;
    color: #4a5568;
}

/* Button group in properties */
.property-editor .field.is-grouped {
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid #e1e4e8;
}

/* Readonly fields */
.property-editor input[readonly] {
    background-color: #f5f5f5;
    cursor: not-allowed;
    color: #6b7280;
}

/* Properties Content Area */
.properties-content {
    flex: 1;
    overflow-y: auto;
    padding: 1.5rem;
}

/* Panel Content Wrapper - Unified Style for all inner panels */
.panel-content-wrapper {
    max-width: 100%;
    background: #ffffff;
    border-radius: 4px;
    padding: 1.5rem;
}

/* ===== Execution and Results Panel Specific Styles ===== */

/* Execution Log Content - Single vertical scrollbar, no horizontal */
.execution-log-content {
    max-height: 400px;
    overflow-y: auto;
    overflow-x: hidden;  /* Prevent horizontal scrollbar */
    padding-right: 0.5rem;  /* Space for scrollbar */
}

/* Variable Changes Content - Similar to execution log */
.variable-changes-content {
    max-height: 400px;
    overflow-y: auto;
    overflow-x: hidden;  /* Prevent horizontal scrollbar at container level */
    padding-right: 0.5rem;
}

/* Tables inside variable changes should be responsive */
.variable-changes-content table {
    table-layout: fixed;  /* Fixed layout for predictable column widths */
    word-wrap: break-word;
}

.variable-changes-content td code {
    word-break: break-all;  /* Break long values if needed */
    display: block;
    max-width: 100%;
}

/* Pre elements inside execution logs - Remove nested scrollbars */
.execution-log-content pre {
    max-height: none;  /* Remove height restriction */
    overflow-x: auto;  /* Only show horizontal scroll if needed */
    overflow-y: visible;  /* No vertical scroll on pre */
    white-space: pre-wrap;  /* Wrap long lines */
    word-wrap: break-word;
    font-size: 0.75rem;
    margin: 0;
}

/* Box elements inside execution log */
.execution-log-content .box {
    margin-bottom: 0.75rem;
    padding: 0.75rem;
    overflow: hidden;  /* Prevent individual boxes from scrolling */
}

/* Validation content - Similar treatment */
.validation-content {
    max-height: 400px;
    overflow-y: auto;
    overflow-x: hidden;
    padding-right: 0.5rem;
}

/* Results container - Parent of all result panels */
.results-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;  /* Prevent container from scrolling */
}

/* Custom scrollbar styling for execution panels */
.execution-log-content::-webkit-scrollbar,
.variable-changes-content::-webkit-scrollbar,
.validation-content::-webkit-scrollbar {
    width: 8px;
}

.execution-log-content::-webkit-scrollbar-track,
.variable-changes-content::-webkit-scrollbar-track,
.validation-content::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
}

.execution-log-content::-webkit-scrollbar-thumb,
.variable-changes-content::-webkit-scrollbar-thumb,
.validation-content::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 4px;
}

.execution-log-content::-webkit-scrollbar-thumb:hover,
.variable-changes-content::-webkit-scrollbar-thumb:hover,
.validation-content::-webkit-scrollbar-thumb:hover {
    background: #555;
}

/* Responsive adjustments */
@media (max-height: 768px) {
    .property-editor {
        padding: 0.75rem;
    }
    
    .property-editor .title {
        font-size: 1.125rem;
        margin-bottom: 1rem;
    }
    
    /* Reduce max-height on smaller screens */
    .execution-log-content,
    .variable-changes-content,
    .validation-content {
        max-height: 300px;
    }
}