/**
 * çµ±ä¸€çš„æ›´æ–°å‹•ç•«æ¨£å¼
 * é©ç”¨æ–¼æ‰€æœ‰é é¢çš„è³‡æ–™æ›´æ–°è¦–è¦ºåé¥‹
 */

/* çµ±ä¸€æ›´æ–°å‹•ç•«é¡åˆ¥ï¼ˆåŸºæ–¼ Signal é é¢çš„æœ€ä½³æ•ˆæœï¼‰ */
.field-updated,
.agv-field-updated,
.signal-updated,
.task-updated,
.rack-updated {
    animation: fieldUpdate 1.0s ease-out;
    position: relative;
    z-index: 1;
}

/* çµ±ä¸€çš„æ›´æ–°å‹•ç•«é—œéµå¹€ï¼ˆä¸‰éšæ®µå¢å¼·æ•ˆæœï¼‰ */
@keyframes fieldUpdate {
    0% {
        background-color: #e8f4fd;
        box-shadow: 0 0 8px rgba(50, 115, 220, 0.4);
    }

    50% {
        background-color: #d1ecf1;
        box-shadow: 0 0 12px rgba(50, 115, 220, 0.5);
    }

    100% {
        background-color: transparent;
        box-shadow: none;
    }
}

/* è¡¨æ ¼ä¸­çš„å‹•ç•«é©é…ï¼ˆå¢å¼·è¡¨æ ¼æ¬„ä½æ•ˆæœï¼‰ */
.table td.field-updated,
.table td.agv-field-updated,
.table td.signal-updated,
.table td.task-updated,
.table td.rack-updated {
    border-radius: 6px;
    transition: all 0.3s ease;
}

/* å¡ç‰‡ä¸­çš„å‹•ç•«é©é… */
.card .field-updated,
.box .field-updated {
    border-radius: 6px;
    margin: 2px;
}

/* Dashboard å¡ç‰‡å‹•ç•«é©é… */
.dashboard-card.field-updated,
.dashboard-metric.field-updated {
    border-radius: 8px;
    transition: all 0.3s ease;
}

/* æ¨™ç±¤å…ƒç´ çš„éæ¸¡æ•ˆæœ */
.field-updated .tag,
.agv-field-updated .tag,
.signal-updated .tag,
.task-updated .tag,
.rack-updated .tag {
    transition: all 0.3s ease;
}

/* é€²åº¦æ¢çš„éæ¸¡æ•ˆæœ */
.field-updated .progress,
.agv-field-updated .progress {
    transition: all 0.3s ease;
}

/* éŸ¿æ‡‰å¼å‹•ç•«èª¿æ•´ */
@media screen and (max-width: 768px) {

    .field-updated,
    .agv-field-updated,
    .signal-updated,
    .task-updated,
    .rack-updated {
        animation-duration: 0.8s;
    }

    @keyframes fieldUpdate {
        0% {
            background-color: #e8f4fd;
            box-shadow: 0 0 6px rgba(50, 115, 220, 0.3);
        }

        50% {
            background-color: #d1ecf1;
            box-shadow: 0 0 8px rgba(50, 115, 220, 0.4);
        }

        100% {
            background-color: transparent;
            box-shadow: none;
        }
    }
}

/* æ·±è‰²ä¸»é¡Œæ”¯æ´ï¼ˆå¦‚æœéœ€è¦ï¼‰ */
@media (prefers-color-scheme: dark) {
    @keyframes fieldUpdate {
        0% {
            background-color: rgba(50, 115, 220, 0.3);
            box-shadow: 0 0 8px rgba(50, 115, 220, 0.5);
        }

        50% {
            background-color: rgba(50, 115, 220, 0.2);
            box-shadow: 0 0 12px rgba(50, 115, 220, 0.6);
        }

        100% {
            background-color: transparent;
            box-shadow: none;
        }
    }
}

/* ğŸ”§ æ–°å¢ï¼šä»»å‹™ç‹€æ…‹å°ˆç”¨å‹•ç•«æ¨£å¼ */
.task-status-cell {
    transition: all 0.3s ease;
}

.task-status-cell.status-updating {
    opacity: 0.6;
    transform: scale(0.95);
    background-color: rgba(255, 193, 7, 0.1);
}

.task-status-cell.status-updated {
    opacity: 1;
    transform: scale(1.05);
    box-shadow: 0 0 10px rgba(0, 123, 255, 0.3);
    background-color: rgba(0, 123, 255, 0.1);
}

.task-status-cell.status-corrected {
    background-color: rgba(255, 193, 7, 0.2);
    border: 2px solid rgba(255, 193, 7, 0.5);
    animation: statusCorrected 2s ease-out;
}

@keyframes statusCorrected {
    0% {
        background-color: rgba(255, 193, 7, 0.3);
        border-color: rgba(255, 193, 7, 0.7);
    }
    50% {
        background-color: rgba(255, 193, 7, 0.2);
        border-color: rgba(255, 193, 7, 0.5);
    }
    100% {
        background-color: transparent;
        border-color: transparent;
    }
}

.task-status-cell .tag {
    transition: all 0.2s ease;
}

/* è¼‰å…¥ç‹€æ…‹æŒ‡ç¤ºå™¨ */
.tasks-loading {
    position: relative;
}

.tasks-loading::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
}

/* æ¸›å°‘å‹•ç•«åå¥½è¨­å®šæ”¯æ´ */
@media (prefers-reduced-motion: reduce) {

    .field-updated,
    .agv-field-updated,
    .signal-updated,
    .task-updated,
    .rack-updated {
        animation: none;
        background-color: #e8f4fd;
        transition: all 0.3s ease;
    }

    .field-updated:hover,
    .agv-field-updated:hover,
    .signal-updated:hover,
    .task-updated:hover,
    .rack-updated:hover {
        background-color: transparent;
        border-color: transparent;
    }

    /* ğŸ”§ æ–°å¢ï¼šæ¸›å°‘å‹•ç•«æ™‚çš„ä»»å‹™ç‹€æ…‹æ¨£å¼ */
    .task-status-cell.status-updating,
    .task-status-cell.status-updated,
    .task-status-cell.status-corrected {
        animation: none;
        transform: none;
        background-color: rgba(0, 123, 255, 0.1);
        transition: background-color 0.3s ease;
    }
}