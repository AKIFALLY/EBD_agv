# WCS Flow Designer - é‚è¼¯åˆ¤æ–·ç¯€é»å®šç¾© (åŸºæ–¼å¯¦éš› AI WCS ä»£ç¢¼)
# åƒ…åŒ…å«å¯¦éš›å­˜åœ¨æ–¼ ai_wcs_ws ä¸­çš„é‚è¼¯è™•ç†å‡½æ•¸

logic_nodes:
  # === æ±ºç­–å„ªå…ˆç´šæ’åºå’Œèª¿åº¦ (çµ±ä¸€æ±ºç­–å¼•æ“) ===
  prioritize_and_schedule:
    name: "å„ªå…ˆç´šæ’åºå’Œèª¿åº¦"
    description: "æŒ‰å„ªå…ˆåº¦æ’åºæ±ºç­–ä¸¦è§£æ±ºè³‡æºè¡çª"
    category: "control"
    icon: "âš–ï¸"
    color: "#F59E0B"
    inputs: ["task_decisions"]
    outputs: ["scheduled_decisions"]
    parameters:
      - name: "sort_order"
        type: "select"
        options: ["priority_desc", "priority_asc"]
        default: "priority_desc"
        description: "æ’åºæ–¹å¼ (é«˜å„ªå…ˆç´šå„ªå…ˆ)"
    logic:
      - function: "_prioritize_and_schedule"
        source: "unified_decision_engine"
        returns: "List[TaskDecision]"

  # === æˆ¿é–“ä½ç½®è³‡è¨Šè™•ç† ===
  get_room_location_info:
    name: "æˆ¿é–“ä½ç½®è³‡è¨Šè™•ç†"
    description: "è¨ˆç®—æˆ¿é–“å…¥å£/å‡ºå£ä½ç½®å’Œç›¸é—œID"
    category: "control"
    icon: "ğŸ "
    color: "#F59E0B"
    inputs: ["room_id"]
    outputs: ["location_info"]
    parameters:
      - name: "room_id"
        type: "integer"
        min: 1
        max: 10
        required: true
        description: "æˆ¿é–“ID (1-10)"
    logic:
      - function: "get_room_location_info"
        source: "unified_decision_engine"
        returns: "Dict[str, int]"

  # === OPUI è«‹æ±‚è™•ç†é‚è¼¯ ===
  process_opui_call_empty_request:
    name: "OPUIå«ç©ºè»Šè«‹æ±‚è™•ç†"
    description: "è™•ç†OPUIå«ç©ºè»Šè«‹æ±‚ä¸¦æ›´æ–°ä»»å‹™ç‹€æ…‹"
    category: "control"
    icon: "ğŸ“"
    color: "#F59E0B"
    inputs: ["opui_request"]
    outputs: ["task_decision"]
    parameters:
      - name: "machine_id"
        type: "integer"
        required: true
        description: "æ©Ÿå°ID"
      - name: "space_num"
        type: "integer"
        options: [1, 2]
        default: 1
        description: "åœè»Šæ ¼ç·¨è™Ÿ"
    logic:
      - function: "_process_opui_call_empty_request"
        source: "unified_decision_engine"
        returns: "Optional[TaskDecision]"

  process_opui_dispatch_full_request:
    name: "OPUIæ´¾æ»¿è»Šè«‹æ±‚è™•ç†"
    description: "è™•ç†OPUIæ´¾æ»¿è»Šè«‹æ±‚ä¸¦ç”Ÿæˆä»»å‹™æ±ºç­–"
    category: "control"
    icon: "ğŸš›"
    color: "#F59E0B"
    inputs: ["opui_request"]
    outputs: ["task_decision"]
    parameters:
      - name: "machine_id"
        type: "integer"
        required: true
        description: "æ©Ÿå°ID"
      - name: "rack_id"
        type: "integer"
        required: true
        description: "æ–™æ¶ID"
      - name: "room_id"
        type: "integer"
        required: true
        description: "ç›®æ¨™æˆ¿é–“ID"
    logic:
      - function: "_process_opui_dispatch_full_request"
        source: "unified_decision_engine"
        returns: "Optional[TaskDecision]"

  # === AGV æ—‹è½‰è·¯å¾‘ç”Ÿæˆ ===
  generate_rotation_nodes:
    name: "AGVæ—‹è½‰è·¯å¾‘ç”Ÿæˆ"
    description: "ç”ŸæˆAGVæ—‹è½‰çš„3å€‹ç¯€é»è·¯å¾‘"
    category: "control"
    icon: "ğŸ”„"
    color: "#F59E0B"
    inputs: ["target_location", "current_location"]
    outputs: ["rotation_nodes"]
    parameters:
      - name: "target_location"
        type: "integer"
        required: true
        description: "ç›®æ¨™ä½ç½®ID"
      - name: "current_location"
        type: "integer"
        required: true
        description: "ç•¶å‰ä½ç½®ID"
    logic:
      - function: "_generate_rotation_nodes"
        source: "unified_decision_engine"
        returns: "List[int]"

  # === ä½ç½®é¡å‹åˆ¤æ–· ===
  is_room_inlet:
    name: "æˆ¿é–“å…¥å£åˆ¤æ–·"
    description: "åˆ¤æ–·ä½ç½®æ˜¯å¦ç‚ºæˆ¿é–“å…¥å£ (X0001æ ¼å¼)"
    category: "control"
    icon: "ğŸšª"
    color: "#F59E0B"
    inputs: ["location_id"]
    outputs: ["is_inlet"]
    parameters:
      - name: "location_id"
        type: "integer"
        required: true
        description: "ä½ç½®ID"
    logic:
      - function: "_is_room_inlet"
        source: "unified_decision_engine"
        returns: "bool"

  is_room_outlet:
    name: "æˆ¿é–“å‡ºå£åˆ¤æ–·"
    description: "åˆ¤æ–·ä½ç½®æ˜¯å¦ç‚ºæˆ¿é–“å‡ºå£ (X0002æ ¼å¼)"
    category: "control"
    icon: "ğŸšª"
    color: "#F59E0B"
    inputs: ["location_id"]
    outputs: ["is_outlet"]
    parameters:
      - name: "location_id"
        type: "integer"
        required: true
        description: "ä½ç½®ID"
    logic:
      - function: "_is_room_outlet"
        source: "unified_decision_engine"
        returns: "bool"

  # === æ±ºç­–çµ±è¨ˆå’Œç›£æ§ ===
  get_decision_statistics:
    name: "æ±ºç­–å¼•æ“çµ±è¨ˆ"
    description: "ç²å–çµ±ä¸€æ±ºç­–å¼•æ“çš„é‹è¡Œçµ±è¨ˆè³‡æ–™"
    category: "control"
    icon: "ğŸ“Š"
    color: "#F59E0B"
    inputs: []
    outputs: ["statistics"]
    parameters: []
    logic:
      - function: "get_decision_statistics"
        source: "unified_decision_engine"
        returns: "Dict[str, Any]"

  # === Work ID åƒæ•¸å»ºæ§‹ (çµ±ä¸€ä»»å‹™ç®¡ç†å™¨) ===
  build_kuka_rack_move_parameters:
    name: "KUKAç§»å‹•è²¨æ¶åƒæ•¸å»ºæ§‹"
    description: "å»ºç«‹KUKAç§»å‹•è²¨æ¶ä»»å‹™åƒæ•¸ (work_id: 220001)"
    category: "control"
    icon: "ğŸ—ï¸"
    color: "#F59E0B"
    inputs: ["task_decision"]
    outputs: ["task_parameters"]
    parameters:
      - name: "work_id"
        type: "string"
        default: "220001"
        description: "Work ID (kuka-ç§»å‹•è²¨æ¶)"
    logic:
      - function: "build_kuka_rack_move_parameters"
        source: "unified_task_manager.WorkIDParameterManager"
        returns: "Dict[str, Any]"

  build_kuka_workflow_parameters:
    name: "KUKAæµç¨‹è§¸ç™¼åƒæ•¸å»ºæ§‹"
    description: "å»ºç«‹KUKAæµç¨‹è§¸ç™¼ä»»å‹™åƒæ•¸ (work_id: 230001)"
    category: "control"
    icon: "âš™ï¸"
    color: "#F59E0B"
    inputs: ["task_decision"]
    outputs: ["task_parameters"]
    parameters:
      - name: "work_id"
        type: "string"
        default: "230001"
        description: "Work ID (kuka-æµç¨‹è§¸ç™¼)"
      - name: "templateCode"
        type: "string"
        default: "W000000001"
        description: "å·¥ä½œæµç¨‹æ¨¡æ¿ä»£ç¢¼"
    logic:
      - function: "build_kuka_workflow_parameters"
        source: "unified_task_manager.WorkIDParameterManager"
        returns: "Dict[str, Any]"

  build_opui_call_empty_parameters:
    name: "OPUIå«ç©ºè»Šåƒæ•¸å»ºæ§‹"
    description: "å»ºç«‹OPUIå«ç©ºè»Šä»»å‹™åƒæ•¸ (work_id: 100001)"
    category: "control"
    icon: "ğŸ“±"
    color: "#F59E0B"
    inputs: ["task_decision"]
    outputs: ["task_parameters"]
    parameters:
      - name: "work_id"
        type: "string"
        default: "100001"
        description: "Work ID (opui-call-empty)"
    logic:
      - function: "build_opui_call_empty_parameters"
        source: "unified_task_manager.WorkIDParameterManager"
        returns: "Dict[str, Any]"

  build_opui_dispatch_full_parameters:
    name: "OPUIæ´¾æ»¿è»Šåƒæ•¸å»ºæ§‹"  
    description: "å»ºç«‹OPUIæ´¾æ»¿è»Šä»»å‹™åƒæ•¸ (work_id: 100002)"
    category: "control"
    icon: "ğŸšš"
    color: "#F59E0B"
    inputs: ["task_decision"]
    outputs: ["task_parameters"]
    parameters:
      - name: "work_id"
        type: "string"
        default: "100002"
        description: "Work ID (opui-dispatch-full)"
    logic:
      - function: "build_opui_dispatch_full_parameters"
        source: "unified_task_manager.WorkIDParameterManager"
        returns: "Dict[str, Any]"

  build_cargo_agv_parameters:
    name: "Cargo AGVåƒæ•¸å»ºæ§‹"
    description: "å»ºç«‹Cargo AGVä»»å‹™åƒæ•¸ (work_id: 2000102/2000201)"
    category: "control"
    icon: "ğŸš›"
    color: "#F59E0B"
    inputs: ["task_decision"]
    outputs: ["task_parameters"]
    parameters:
      - name: "work_id"
        type: "select"
        options: ["2000102", "2000201"]
        description: "Work ID (CargoAGVå…¥å£/å‡ºå£)"
    logic:
      - function: "build_cargo_agv_parameters"
        source: "unified_task_manager.WorkIDParameterManager"
        returns: "Dict[str, Any]"