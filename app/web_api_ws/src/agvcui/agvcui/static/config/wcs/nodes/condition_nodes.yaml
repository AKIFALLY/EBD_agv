# WCS Flow Designer - æ¢ä»¶æª¢æŸ¥ç¯€é»å®šç¾© (åŸºæ–¼å¯¦éš› AI WCS ä»£ç¢¼)
# åƒ…åŒ…å«å¯¦éš›å­˜åœ¨æ–¼ ai_wcs_ws ä¸­çš„æ¢ä»¶æª¢æŸ¥å‡½æ•¸

condition_nodes:
  # === ä½ç½®å’Œå¯ç”¨æ€§æª¢æŸ¥ç¯€é» ===
  check_locations_available:
    name: "æª¢æŸ¥ä½ç½®å¯ç”¨æ€§"
    description: "æª¢æŸ¥æŒ‡å®šä½ç½®åˆ—è¡¨çš„å¯ç”¨ç‹€æ…‹"
    category: "input"
    icon: "ğŸ“"
    color: "#3B82F6"
    inputs: []
    parameters:
      - name: "location_ids"
        type: "list"
        required: true
        description: "ä½ç½®IDåˆ—è¡¨"
      - name: "status"
        type: "integer"
        required: true
        options: [0, 1, 2]
        description: "ä½ç½®ç‹€æ…‹ (0=å¯ç”¨, 1=ä½”ç”¨, 2=ç¶­è­·)"
    conditions:
      - function: "check_locations_available"
        source: "enhanced_database_client"
        returns: "List[Dict[str, Any]]"

  check_ng_rack_at_location:
    name: "æª¢æŸ¥ä½ç½®NGæ–™æ¶"
    description: "æª¢æŸ¥æŒ‡å®šä½ç½®æ˜¯å¦æœ‰NGç‹€æ…‹çš„æ–™æ¶"
    category: "input"
    icon: "âŒ"
    color: "#3B82F6"
    inputs: []
    parameters:
      - name: "location_id"
        type: "integer"
        required: true
        description: "ä½ç½®ID"
    conditions:
      - function: "check_ng_rack_at_location"
        source: "enhanced_database_client"
        returns: "bool"

  check_carriers_in_room:
    name: "æª¢æŸ¥æˆ¿é–“Carrier"
    description: "æª¢æŸ¥æˆ¿é–“æ˜¯å¦æœ‰carrierè¼‰å…·"
    category: "input"
    icon: "ğŸš›"
    color: "#3B82F6"
    inputs: []
    parameters:
      - name: "room_id"
        type: "integer"
        required: true
        description: "æˆ¿é–“ID"
    conditions:
      - function: "check_carriers_in_room"
        source: "enhanced_database_client"
        returns: "bool"

  check_racks_at_location:
    name: "æª¢æŸ¥ä½ç½®æ–™æ¶ç‹€æ…‹"
    description: "æª¢æŸ¥æŒ‡å®šä½ç½®çš„æ–™æ¶å’Œç‹€æ…‹è³‡è¨Š"
    category: "input"
    icon: "ğŸ“¦"
    color: "#3B82F6"
    inputs: []
    parameters:
      - name: "location_id"
        type: "integer"
        required: true
        description: "ä½ç½®ID"
      - name: "status_filter"
        type: "list"
        description: "æ–™æ¶ç‹€æ…‹éæ¿¾åˆ—è¡¨ (å¯é¸)"
    conditions:
      - function: "check_racks_at_location"
        source: "enhanced_database_client"
        returns: "List[Dict[str, Any]]"

  # === æ¥­å‹™æµç¨‹æª¢æŸ¥ç¯€é» (çµ±ä¸€æ±ºç­–å¼•æ“) ===
  check_agv_rotation_flow:
    name: "AGVæ—‹è½‰æµç¨‹æª¢æŸ¥"
    description: "æª¢æŸ¥AGVæ—‹è½‰ç‹€æ…‹ä¸¦ç”Ÿæˆæ—‹è½‰ä»»å‹™ (å„ªå…ˆç´š:100)"
    category: "input"
    icon: "ğŸ”„"
    color: "#3B82F6"
    inputs: []
    parameters:
      - name: "priority"
        type: "integer"
        default: 100
        description: "ä»»å‹™å„ªå…ˆç´š (æœ€é«˜)"
    conditions:
      - function: "check_agv_rotation_flow"
        source: "unified_decision_engine"
        returns: "List[TaskDecision]"

  check_ng_rack_recycling_flow:
    name: "NGæ–™æ¶å›æ”¶æµç¨‹æª¢æŸ¥"
    description: "æª¢æŸ¥NGæ–™æ¶ä¸¦ç”Ÿæˆå›æ”¶ä»»å‹™ (å„ªå…ˆç´š:90)"
    category: "input"
    icon: "â™»ï¸"
    color: "#3B82F6"
    inputs: []
    parameters:
      - name: "priority"
        type: "integer"
        default: 90
        description: "ä»»å‹™å„ªå…ˆç´š"
    conditions:
      - function: "check_ng_rack_recycling_flow"
        source: "unified_decision_engine"
        returns: "List[TaskDecision]"

  check_full_rack_to_manual_flow:
    name: "æ»¿æ–™æ¶åˆ°äººå·¥å€æµç¨‹æª¢æŸ¥"
    description: "æª¢æŸ¥æ»¿æ–™æ¶ä¸¦ç”Ÿæˆäººå·¥æ”¶æ–™ä»»å‹™ (å„ªå…ˆç´š:80)"
    category: "input"
    icon: "ğŸ“¦"
    color: "#3B82F6"
    inputs: []
    parameters:
      - name: "priority"
        type: "integer"
        default: 80
        description: "ä»»å‹™å„ªå…ˆç´š"
    conditions:
      - function: "check_full_rack_to_manual_flow"
        source: "unified_decision_engine"
        returns: "List[TaskDecision]"

  check_manual_area_transport_flow:
    name: "äººå·¥æ”¶æ–™å€æ¬é‹æµç¨‹æª¢æŸ¥"
    description: "æª¢æŸ¥äººå·¥æ”¶æ–™å€ä¸¦ç”Ÿæˆæ¬é‹ä»»å‹™ (å„ªå…ˆç´š:80)"
    category: "input"
    icon: "ğŸ‘·"
    color: "#3B82F6"
    inputs: []
    parameters:
      - name: "priority"
        type: "integer"
        default: 80
        description: "ä»»å‹™å„ªå…ˆç´š"
    conditions:
      - function: "check_manual_area_transport_flow"
        source: "unified_decision_engine"
        returns: "List[TaskDecision]"

  check_system_to_room_flow:
    name: "ç³»çµ±åˆ°æˆ¿é–“æµç¨‹æª¢æŸ¥"
    description: "æª¢æŸ¥ç³»çµ±æº–å‚™å€åˆ°æˆ¿é–“çš„æ¬é‹éœ€æ±‚ (å„ªå…ˆç´š:60)"
    category: "input"
    icon: "ğŸ "
    color: "#3B82F6"
    inputs: []
    parameters:
      - name: "priority"
        type: "integer"
        default: 60
        description: "ä»»å‹™å„ªå…ˆç´š"
    conditions:
      - function: "check_system_to_room_flow"
        source: "unified_decision_engine"
        returns: "List[TaskDecision]"

  check_empty_rack_transfer_flow:
    name: "ç©ºæ–™æ¶è½‰ç§»æµç¨‹æª¢æŸ¥"
    description: "æª¢æŸ¥ç©ºæ–™æ¶è½‰ç§»éœ€æ±‚ (å„ªå…ˆç´š:40)"
    category: "input"
    icon: "ğŸ“¤"
    color: "#3B82F6"
    inputs: []
    parameters:
      - name: "priority"
        type: "integer"
        default: 40
        description: "ä»»å‹™å„ªå…ˆç´š"
    conditions:
      - function: "check_empty_rack_transfer_flow"
        source: "unified_decision_engine"
        returns: "List[TaskDecision]"

  check_manual_empty_recycling_flow:
    name: "äººå·¥å›æ”¶ç©ºæ–™æ¶æµç¨‹æª¢æŸ¥"
    description: "æª¢æŸ¥äººå·¥å›æ”¶ç©ºæ–™æ¶éœ€æ±‚ (å„ªå…ˆç´š:40, WorkID:230001)"
    category: "input"
    icon: "ğŸ”„"
    color: "#3B82F6"
    inputs: []
    parameters:
      - name: "priority"
        type: "integer"
        default: 40
        description: "ä»»å‹™å„ªå…ˆç´š"
      - name: "work_id"
        type: "string"
        default: "230001"
        description: "ç‰¹æ®Šæµç¨‹è§¸ç™¼WorkID"
    conditions:
      - function: "check_manual_empty_recycling_flow"
        source: "unified_decision_engine"
        returns: "List[TaskDecision]"

  check_opui_requests_flow:
    name: "OPUIè«‹æ±‚æµç¨‹æª¢æŸ¥"
    description: "æª¢æŸ¥OPUIå«è»Šå’Œæ´¾è»Šè«‹æ±‚"
    category: "input"
    icon: "ğŸ“"
    color: "#3B82F6"
    inputs: []
    parameters:
      - name: "request_type"
        type: "string"
        options: ["call_empty", "dispatch_full"]
        description: "è«‹æ±‚é¡å‹"
    conditions:
      - function: "check_opui_requests_flow"
        source: "unified_decision_engine"
        returns: "List[TaskDecision]"