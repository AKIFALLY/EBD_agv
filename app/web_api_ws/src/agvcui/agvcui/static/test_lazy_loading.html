<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŒ‰éœ€è¼‰å…¥æ¸¬è©¦</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .log { background: #f5f5f5; padding: 10px; margin: 10px 0; font-family: monospace; }
        button { margin: 5px; padding: 10px; }
    </style>
</head>
<body>
    <h1>ğŸš€ AGVC UI æŒ‰éœ€è¼‰å…¥æ¸¬è©¦</h1>
    
    <div class="test-section">
        <h2>æ¸¬è©¦ä¸åŒé é¢è·¯å¾‘</h2>
        <button onclick="testPath('/map')">æ¸¬è©¦ Map é é¢</button>
        <button onclick="testPath('/signals')">æ¸¬è©¦ Signals é é¢</button>
        <button onclick="testPath('/tasks')">æ¸¬è©¦ Tasks é é¢</button>
        <button onclick="testPath('/unknown')">æ¸¬è©¦æœªçŸ¥é é¢</button>
        <button onclick="clearLog()">æ¸…é™¤æ—¥èªŒ</button>
    </div>
    
    <div class="test-section">
        <h2>è¼‰å…¥æ—¥èªŒ</h2>
        <div id="log" class="log"></div>
    </div>

    <script>
        // æ¨¡æ“¬ä¸åŒçš„é é¢è·¯å¾‘
        function testPath(path) {
            // æš«æ™‚ä¿®æ”¹ pathname ä¾†æ¸¬è©¦
            const originalPath = window.location.pathname;
            
            // ä½¿ç”¨ history API ä¾†æ¨¡æ“¬è·¯å¾‘è®Šæ›´
            history.pushState({}, '', path);
            
            log(`ğŸ”„ æ¸¬è©¦è·¯å¾‘: ${path}`);
            
            // é‡æ–°è¼‰å…¥ index.js ä¾†æ¸¬è©¦æŒ‰éœ€è¼‰å…¥
            const script = document.createElement('script');
            script.type = 'module';
            script.src = '/static/index.js?' + Date.now(); // åŠ æ™‚é–“æˆ³é¿å…å¿«å–
            
            script.onload = () => {
                log(`âœ… ${path} é é¢æ¨¡çµ„è¼‰å…¥å®Œæˆ`);
            };
            
            script.onerror = (error) => {
                log(`âŒ ${path} é é¢æ¨¡çµ„è¼‰å…¥å¤±æ•—: ${error}`);
            };
            
            document.head.appendChild(script);
            
            // æ¸…ç†
            setTimeout(() => {
                document.head.removeChild(script);
                history.pushState({}, '', originalPath);
            }, 2000);
        }
        
        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${timestamp}] ${message}\n`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function clearLog() {
            document.getElementById('log').innerHTML = '';
        }
        
        // æ””æˆª console.log ä¾†é¡¯ç¤ºè¼‰å…¥æ—¥èªŒ
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            if (args[0] && typeof args[0] === 'string' && 
                (args[0].includes('ğŸ”„') || args[0].includes('âœ…') || args[0].includes('â„¹ï¸'))) {
                log(args.join(' '));
            }
        };
        
        log('ğŸ“‹ æŒ‰éœ€è¼‰å…¥æ¸¬è©¦é é¢å·²æº–å‚™å°±ç·’');
    </script>
</body>
</html>
