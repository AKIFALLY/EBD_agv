flow:
- notify:
    level: info
    message: Starting task
- update:
    set:
      status: working
    target: agv
    where:
      id: ${agv_id}
- if:
    condition: ${task_priority} > 5
    else:
    - notify:
        level: debug
        message: Normal priority
    then:
    - create:
        target: task
        with:
          id: task_001
          priority: high
- switch:
    cases:
    - do:
      - query:
          limit: 10
          target: task
          where:
            id: task_urgent
      when: '> 8'
    expression: ${task_priority}
metadata:
  created_at: '2025-08-28T06:08:58.955279'
  description: 測試 card ID 清理
  id: test_card_cleaning
  name: Test Card ID Cleaning
  updated_at: '2025-08-28T06:08:58.955274'
  version: '1.1'
preload: {}
rules: {}
settings: {}
variables:
  agv_id: agv01
  task_priority: 5
