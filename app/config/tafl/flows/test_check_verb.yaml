metadata:
  id: test_check_verb
  name: Test Check Verb
  version: "1.1.2"
  description: Simple test for check verb functionality

variables:
  counter: 10
  status: "active"
  threshold: 5

flow:
  # Test 1: Simple numeric check
  - check:
      condition: ${counter > threshold}
      as: is_above_threshold
  
  - notify:
      message: "Counter ${counter} is above threshold ${threshold}: ${is_above_threshold}"
      level: info
  
  # Test 2: String comparison check
  - check:
      target: status
      condition: ${status == "active"}
      as: is_active
  
  - notify:
      message: "Status is active: ${is_active}"
      level: info
  
  # Test 3: Compound condition check
  - check:
      condition: ${is_above_threshold and is_active}
      as: both_conditions_met
  
  # Test 4: Use check result in if statement
  - if:
      condition: ${both_conditions_met}
      then:
        - set:
            result: "All checks passed"
        - notify:
            message: "✅ Both conditions are met"
            level: info
      else:
        - set:
            result: "Some checks failed"
        - notify:
            message: "❌ Not all conditions met"
            level: warning
  
  # Test 5: Array length check
  - set:
      items: [1, 2, 3, 4, 5]
  
  - check:
      condition: ${len(items) > 3}
      as: has_many_items
  
  - notify:
      message: "Array has ${len(items)} items, many items: ${has_many_items}"
      level: info
  
  # Test 6: Check with storing result (v1.1.3: 'as' is now required)
  - check:
      condition: ${counter < 100}
      as: is_below_limit
  
  # Test 7: Mathematical expression check
  - check:
      condition: ${(counter * 2) > (threshold * 3)}
      as: complex_math_check
  
  - notify:
      message: "Complex math check (${counter}*2 > ${threshold}*3): ${complex_math_check}"
      level: info
  
  # Final summary
  - notify:
      message: "Check verb test completed with result: ${result}"
      level: info