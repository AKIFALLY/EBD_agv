# Flow 3: loader_take_cleaner.yaml

## ğŸ¯ æ¥­å‹™ç›®çš„
å¾æ¸…æ´—æ©Ÿä¸Šå±¤æ‰¹é‡å–å‡ºæ¸…æ´—å®Œæˆçš„è¼‰å…·

## ğŸ“‹ åŸºæœ¬ä¿¡æ¯

| é …ç›® | å€¼ |
|------|-----|
| æ–‡ä»¶å | `loader_take_cleaner.yaml` |
| Flow ID | `loader_take_cleaner` |
| å„ªå…ˆç´š | 43 |
| åŸ·è¡Œé–“éš” | 12 ç§’ |
| Work ID | **2030101**ï¼ˆStation-basedï¼Œåªæœ‰1å€‹ï¼‰|

## ğŸ­ æ¥­å‹™å ´æ™¯

### å‰ç½®æ¢ä»¶
1. Loader AGV å·²å°‡è¼‰å…·æ”¾å…¥æ¸…æ´—æ©Ÿä¸‹å±¤ï¼ˆPUT_CLEANER å®Œæˆï¼‰
2. æ¸…æ´—æ©Ÿå®Œæˆæ¸…æ´—åˆ¶ç¨‹
3. è¼‰å…·ç§»å‹•åˆ°**ä¸Šå±¤**ä¸¦æ›´æ–°ç‚ºã€Œæ¸…æ´—å®Œæˆã€ï¼ˆstatus_id: 303ï¼‰

### è§¸ç™¼æ¢ä»¶
- **æ¸…æ´—æ©Ÿä¸Šå±¤ Station 01 æœ‰æ¸…æ´—å®Œæˆçš„è¼‰å…·**ï¼ˆstatus_id: 303ï¼Œè‡³å°‘2å€‹ï¼‰
- Loader AGV è»Šä¸Šæœ‰ç©ºä½ï¼ˆ**è‡³å°‘2æ ¼ç©ºä½**ï¼‰
- æ²’æœ‰é‡è¤‡çš„æœªå®Œæˆä»»å‹™

## ğŸ”§ æŠ€è¡“è¦æ ¼

### æ¸…æ´—æ©Ÿé…ç½®ï¼ˆStation-basedï¼Œå›ºå®šæ–¹å‘ï¼‰

**ç‰©ç†çµæ§‹**ï¼š
- Equipment 203ï¼ˆæ¸…æ´—æ©Ÿï¼‰
- 4å€‹ Portï¼ˆPort 1-4ï¼‰
- **åªä½¿ç”¨ Station 01**ï¼ˆ**ä¸Šå±¤å‡ºæ–™**ï¼‰

**Station-Port æ˜ å°„**ï¼ˆæ¨™æº–è¨­å‚™ï¼‰ï¼š
- **Station 01**: Port 1-2ï¼ˆ**2æ ¼æ‰¹é‡**/ä¸Šå±¤/**åª TAKE**ï¼‰

**Work ID é…ç½®**ï¼š
- `2030101`: Station 01 å–æ¸…æ´—æ©Ÿï¼ˆPort 1-2ï¼Œ**2æ ¼æ‰¹é‡**/ä¸Šå±¤/**åª TAKE**ï¼‰

**æ¸…æ´—åˆ¶ç¨‹æµç¨‹**ï¼ˆå›ºå®šæ–¹å‘ï¼‰ï¼š
```
ä¸‹å±¤é€²æ–™ï¼ˆPUT_CLEANER, Station 03ï¼‰
    â†“ æ¸…æ´—åˆ¶ç¨‹
ä¸Šå±¤å‡ºæ–™ï¼ˆTAKE_CLEANER, Station 01ï¼‰
    â†“
(æœ¬ Flow)
```

**å›ºå®šå–®å‘è¨­è¨ˆ**ï¼š
1. **PUT_CLEANER**: **åªæ”¾å…¥ä¸‹å±¤ Station 03**ï¼ˆPort 3-4ï¼ŒFlow 2ï¼‰
2. **æ¸…æ´—æ©Ÿå…§éƒ¨**: æ¸…æ´—åˆ¶ç¨‹ï¼ˆä¸‹å±¤ç§»åˆ°ä¸Šå±¤ï¼‰
3. **TAKE_CLEANER**: **åªå¾ä¸Šå±¤ Station 01 å–å‡º**ï¼ˆPort 1-2ï¼Œæœ¬ Flowï¼‰
4. **å›ºå®šå–®å‘æ“ä½œ**: Station 03 åª PUTï¼ŒStation 01 åª TAKE

### æ‰¹é‡è™•ç†é‚è¼¯

**æ¨™æº–2æ ¼æ‰¹é‡è™•ç†**ï¼ˆStation 01ï¼‰ï¼š
- **ä¸€æ¬¡å–æ–™æ“ä½œå–å‡º2æ ¼**ï¼ˆ2æ ¼æ‰¹é‡è™•ç†ï¼‰
- **éœ€è¦æª¢æŸ¥æ¸…æ´—æ©Ÿä¸Šå±¤è‡³å°‘æœ‰2å€‹è¼‰å…·**ï¼ˆPort 1-2 å…¨éƒ¨æœ‰è¼‰å…·ï¼‰
- **éœ€è¦æª¢æŸ¥ AGV è‡³å°‘æœ‰2æ ¼ç©ºä½**
- **ä¸æ”¯æŒéƒ¨åˆ†å–æ–™**ï¼ˆè¦ä¹ˆå–2æ ¼ï¼Œè¦ä¹ˆä¸å–ï¼‰

## ğŸ“ TAFL Flow è¨­è¨ˆ

### Metadata
```yaml
metadata:
  id: "loader_take_cleaner"
  name: "Loader AGV å¾æ¸…æ´—æ©Ÿä¸Šå±¤å–æ–™"
  enabled: true
  version: "1.0.0"
  description: "æª¢æŸ¥æ¸…æ´—æ©Ÿä¸Šå±¤æ¸…æ´—å®Œæˆè¼‰å…·ï¼Œå‰µå»º Loader AGV å–æ–™ä»»å‹™"
  author: "TAFL System"
  created_at: "2025-10-16"
  tags: ["loader", "cleaner", "take", "automation"]
```

### Variables
```yaml
variables:
  priority: 43
  model: "LOADER"
  cleaner_equipment_id: 203
  station: 1                      # Station 01ï¼ˆä¸Šå±¤å‡ºæ–™ï¼‰
  work_id: 2030101                # å”¯ä¸€çš„ Work ID
  ports: [1, 2]                   # Port 1-2ï¼ˆä¸Šå±¤ï¼‰
  batch_size: 2
  row: "upper"                    # ä¸Šå±¤
```

## âš ï¸ æ³¨æ„äº‹é …

### æ¸…æ´—æ©Ÿå›ºå®šæ–¹å‘è¨­è¨ˆ
- **ä¸Šå±¤ Station 01ï¼ˆæœ¬ Flowï¼‰**: Port 1-2ï¼Œ**åª TAKE**ï¼ˆå‡ºæ–™ï¼‰
- **ä¸‹å±¤ Station 03ï¼ˆFlow 2ï¼‰**: Port 3-4ï¼Œ**åª PUT**ï¼ˆé€²æ–™ï¼‰
- **å›ºå®šå–®å‘æµç¨‹**: ä¸‹å±¤é€²æ–™ â†’ æ¸…æ´—åˆ¶ç¨‹ â†’ ä¸Šå±¤å‡ºæ–™

### ç‹€æ…‹ç¢¼æ˜ å°„
- `302`: æ¸…æ´—ä¸­ï¼ˆPUT_CLEANER æ”¾å…¥å¾Œï¼‰
- `303`: æ¸…æ´—å®Œæˆï¼ˆTAKE_CLEANER è§¸ç™¼æ¢ä»¶ï¼Œ**åœ¨ä¸Šå±¤æº–å‚™è¢«å–èµ°**ï¼‰

## ğŸ§ª æ¸¬è©¦è¦é»

### å–®å…ƒæ¸¬è©¦
1. âœ… æ­£ç¢ºæŸ¥è©¢ä¸Šå±¤ Station 01 è¼‰å…·
2. âœ… è¼‰å…·æ•¸é‡ >= 2ï¼ŒAGV ç©ºä½ >= 2
3. âœ… æ­£ç¢ºä½¿ç”¨ status_id: 303

### æ•´åˆæ¸¬è©¦
1. âœ… èˆ‡ PUT_CLEANER éŠœæ¥ï¼ˆå›ºå®šæ–¹å‘ï¼‰
2. âœ… èˆ‡å¾ŒçºŒæµç¨‹éŠœæ¥ï¼ˆPUT_SOAKER æˆ– PUT_PRE_DRYERï¼‰

## ğŸ”— ç›¸é—œæ–‡æª”

- **Loader AGV ä»£ç¢¼**: `/app/agv_ws/src/loader_agv/loader_agv/robot_states/take_cleaner/`
- **å‰ç½®æµç¨‹**: Flow 2 - `PUT_CLEANER`
