# Docker å®¹å™¨ç®¡ç†å·¥å…· Prompt

## ğŸ¯ é©ç”¨å ´æ™¯
- Docker å®¹å™¨çš„å•Ÿå‹•ã€åœæ­¢ã€é‡å•Ÿç®¡ç†
- å®¹å™¨ç‹€æ…‹ç›£æ§å’Œå¥åº·æª¢æŸ¥
- AGV å’Œ AGVC é›™ç’°å¢ƒå®¹å™¨ç®¡ç†
- å®¹å™¨å…§ç’°å¢ƒå¿«é€Ÿé€²å…¥å’Œå‘½ä»¤åŸ·è¡Œ
- ç³»çµ±æ•´é«”å®¹å™¨ç‹€æ…‹è¨ºæ–·

## ğŸ“‹ æ ¸å¿ƒå·¥å…·æ¦‚è¿°
RosAGV å°ˆç”¨ Docker ç®¡ç†å·¥å…·é›†ï¼Œæä¾›çµ±ä¸€çš„å®¹å™¨æ“ä½œä»‹é¢ï¼Œæ”¯æ´ AGV è»Šè¼‰ç³»çµ±å’Œ AGVC ç®¡ç†ç³»çµ±çš„é›™ç’°å¢ƒç®¡ç†ã€‚

## ğŸ”§ å·¥å…·ä½¿ç”¨æŒ‡å°

### ğŸš€ è¶…ç°¡å–®ä½¿ç”¨æ–¹å¼ (æ¨è–¦)
```bash
# [å®¿ä¸»æ©Ÿ] ä½¿ç”¨çµ±ä¸€å·¥å…·å…¥å£ (æœ€ç°¡å–®)
r containers-status      # æª¢æŸ¥æ‰€æœ‰å®¹å™¨ç‹€æ…‹
r agvc-start            # å•Ÿå‹• AGVC ç³»çµ±
r agvc-stop             # åœæ­¢ AGVC ç³»çµ±
r agv-start             # å•Ÿå‹• AGV å®¹å™¨
r agv-stop              # åœæ­¢ AGV å®¹å™¨
```

### è¼‰å…¥å°ˆæ¥­å·¥å…·é›† (é€²éšä½¿ç”¨)
```bash
# [å®¿ä¸»æ©Ÿ] è¼‰å…¥æ‰€æœ‰Dockerç®¡ç†å·¥å…·
source scripts/docker-tools/docker-tools.sh
show_docker_tools_help
```

### AGV å®¹å™¨ç®¡ç† (å°ˆæ¥­å·¥å…·é›†)
```bash
# [å®¿ä¸»æ©Ÿ] AGV å®¹å™¨ç®¡ç†å·¥å…·
agv_start         # å•Ÿå‹• AGV å®¹å™¨
agv_stop          # åœæ­¢ AGV å®¹å™¨
agv_enter         # é€²å…¥ AGV å®¹å™¨ (è‡ªå‹•è¼‰å…¥ agv_source)
agv_logs          # æŸ¥çœ‹ AGV æ—¥èªŒ
agv_health        # AGV å¥åº·æª¢æŸ¥
agv_status        # AGV å®¹å™¨è©³ç´°ç‹€æ…‹
```

### AGVC å®¹å™¨ç®¡ç† (å°ˆæ¥­å·¥å…·é›†)
```bash
# [å®¿ä¸»æ©Ÿ] AGVC å®¹å™¨ç®¡ç†å·¥å…·
agvc_start        # å•Ÿå‹• AGVC ç³»çµ± (æ‰€æœ‰æœå‹™)
agvc_stop         # åœæ­¢ AGVC ç³»çµ±
agvc_enter        # é€²å…¥ AGVC å®¹å™¨ (è‡ªå‹•è¼‰å…¥ agvc_source)
agvc_logs         # æŸ¥çœ‹ AGVC æ—¥èªŒ
agvc_health       # AGVC å¥åº·æª¢æŸ¥
agvc_services     # æª¢æŸ¥æ‰€æœ‰ AGVC æœå‹™ç‹€æ…‹
agvc_status       # AGVC å®¹å™¨è©³ç´°ç‹€æ…‹
```

### ç³»çµ±æ•´é«”æ“ä½œ (å°ˆæ¥­å·¥å…·é›†)
```bash
# [å®¿ä¸»æ©Ÿ] ç³»çµ±æ•´é«”ç®¡ç†å·¥å…·
all_start         # å•Ÿå‹•æ‰€æœ‰ç³»çµ± (AGVC + AGV)
all_stop          # åœæ­¢æ‰€æœ‰ç³»çµ±
all_restart       # é‡å•Ÿæ‰€æœ‰ç³»çµ±
all_status        # æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ç‹€æ…‹
all_health        # æ™ºèƒ½å¥åº·ç‹€æ…‹åˆ¤æ–·
all_ports         # æª¢æŸ¥ç«¯å£ç‹€æ…‹
all_resources     # æª¢æŸ¥è³‡æºä½¿ç”¨æƒ…æ³
all_network       # æª¢æŸ¥ç¶²è·¯é…ç½®
all_summary       # ç³»çµ±ç‹€æ…‹æ‘˜è¦
```

### å¿«é€Ÿå‘½ä»¤åŸ·è¡Œ (å°ˆæ¥­å·¥å…·é›†)
```bash
# [å®¿ä¸»æ©Ÿ] å¿«é€Ÿå®¹å™¨å…§æŒ‡ä»¤åŸ·è¡Œ
quick_agv "ros2 node list"    # åœ¨ AGV å®¹å™¨åŸ·è¡Œ ROS 2 æŒ‡ä»¤
quick_agvc "check_agvc_status" # åœ¨ AGVC å®¹å™¨åŸ·è¡Œç³»çµ±æª¢æŸ¥
```

## ğŸ¯ ä½¿ç”¨ç­–ç•¥

### é–‹ç™¼å ´æ™¯é¸æ“‡
| é–‹ç™¼ä»»å‹™ | æ¨è–¦æ“ä½œ | è‡ªå‹•è¼‰å…¥ç’°å¢ƒ |
|---------|---------|-------------|
| AGVç‹€æ…‹æ©Ÿé–‹ç™¼ | `agv_enter` | agv_source (9å€‹å·¥ä½œç©ºé–“) |
| Web APIé–‹ç™¼ | `agvc_enter` | agvc_source (11å€‹å·¥ä½œç©ºé–“) |
| ç³»çµ±æ•´åˆæ¸¬è©¦ | `all_start` + åˆ†åˆ¥é€²å…¥ | æ ¹æ“šå®¹å™¨è‡ªå‹•é¸æ“‡ |
| å•é¡Œè¨ºæ–· | `all_health` | N/A |

### å·¥ä½œæµç¨‹æœ€ä½³å¯¦è¸
```bash
# [å®¿ä¸»æ©Ÿ] 1. ç³»çµ±å•Ÿå‹•æª¢æŸ¥
all_status                # æª¢æŸ¥å®¹å™¨é‹è¡Œç‹€æ…‹
all_health                # å…¨é¢å¥åº·æª¢æŸ¥

# [å®¿ä¸»æ©Ÿ] 2. é–‹ç™¼ç’°å¢ƒæº–å‚™
agv_enter                 # æˆ– agvc_enter
# è‡ªå‹•åŸ·è¡Œ: source /app/setup.bash && agv_source

# [å®¹å™¨å…§] 3. ç³»çµ±ç‹€æ…‹é©—è­‰
check_system_status       # å®¹å™¨å…§ç’°å¢ƒæª¢æŸ¥
check_zenoh_status        # é€šè¨Šç‹€æ…‹ç¢ºèª
```

## ğŸ”§ é€²éšåŠŸèƒ½

### çµ„åˆæ“ä½œç¯„ä¾‹
```bash
# [å®¿ä¸»æ©Ÿ] å®Œæ•´ç³»çµ±é‡å•Ÿå’Œæª¢æŸ¥
all_stop && sleep 5 && all_start && sleep 10 && all_health

# [å®¿ä¸»æ©Ÿ] å¿«é€Ÿè¨ºæ–·å•é¡Œ
all_status && all_ports && quick_agv "ros2 node list" && quick_agvc "check_agvc_status"

# [å®¿ä¸»æ©Ÿ] é–‹ç™¼ç’°å¢ƒå¿«é€Ÿè¨­ç½®
agvc_start && agvc_enter
# åœ¨å®¹å™¨å…§è‡ªå‹•åŸ·è¡Œç’°å¢ƒè¼‰å…¥
```

### ç‹€æ…‹ç›£æ§
```bash
# [å®¿ä¸»æ©Ÿ] å®¹å™¨ç‹€æ…‹è©³æƒ…
scripts/docker-tools/container-status.sh all --verbose

# [å®¿ä¸»æ©Ÿ] ç«¯å£è¡çªæª¢æŸ¥
scripts/docker-tools/container-status.sh ports --conflicts

# [å®¿ä¸»æ©Ÿ] è³‡æºä½¿ç”¨ç›£æ§
scripts/docker-tools/container-status.sh resources --monitoring
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œè¨ºæ–·
| å•é¡Œç—‡ç‹€ | è¨ºæ–·æŒ‡ä»¤ | è§£æ±ºæ–¹æ¡ˆ |
|---------|---------|---------|
| å®¹å™¨ç„¡æ³•å•Ÿå‹• | `all_status` | æª¢æŸ¥ç«¯å£è¡çªã€é…ç½®æª”æ¡ˆ |
| ç„¡æ³•é€²å…¥å®¹å™¨ | `agv_health`/`agvc_health` | ç¢ºèªå®¹å™¨é‹è¡Œç‹€æ…‹ |
| ç’°å¢ƒè¼‰å…¥å¤±æ•— | å®¹å™¨å…§ `check_system_status` | æª¢æŸ¥å·¥ä½œç©ºé–“å»ºç½®ç‹€æ…‹ |
| é€šè¨Šä¸­æ–· | `all_ports` + `check_zenoh_status` | æª¢æŸ¥Zenoh Routerç‹€æ…‹ |

### ç·Šæ€¥æ“ä½œ
```bash
# [å®¿ä¸»æ©Ÿ] å¼·åˆ¶é‡å•Ÿæ‰€æœ‰æœå‹™
docker compose -f docker-compose.agvc.yml down --remove-orphans
docker compose -f docker-compose.yml down --remove-orphans
all_start

# [å®¿ä¸»æ©Ÿ] æ¸…ç†ç•°å¸¸å®¹å™¨
docker system prune -f
docker volume prune -f
```

## ğŸ” é™¤éŒ¯æª¢æŸ¥æ¸…å–®

### å•Ÿå‹•å‰æª¢æŸ¥
- [ ] ç¢ºèªDockeræœå‹™é‹è¡Œ
- [ ] æª¢æŸ¥ç«¯å£7447, 8000-8002, 5432æ˜¯å¦è¢«ä½”ç”¨
- [ ] é©—è­‰é…ç½®æª”æ¡ˆå­˜åœ¨ä¸”æ ¼å¼æ­£ç¢º

### é‹è¡Œä¸­æª¢æŸ¥
- [ ] `all_status` ç¢ºèªæ‰€æœ‰å®¹å™¨é‹è¡Œ
- [ ] `all_health` æª¢æŸ¥ç³»çµ±å¥åº·ç‹€æ…‹
- [ ] å®¹å™¨å…§ `check_zenoh_status` ç¢ºèªé€šè¨Šæ­£å¸¸
- [ ] å®¹å™¨å…§ `check_system_status` ç¢ºèªå·¥ä½œç©ºé–“ç‹€æ…‹

### é–‹ç™¼ç’°å¢ƒæª¢æŸ¥
- [ ] é€²å…¥å®¹å™¨å¾Œç’°å¢ƒè‡ªå‹•è¼‰å…¥
- [ ] `ros2 node list` é¡¯ç¤ºé æœŸç¯€é»
- [ ] ç›¸é—œæœå‹™ï¼ˆè³‡æ–™åº«ã€Webï¼‰æ­£å¸¸å›æ‡‰