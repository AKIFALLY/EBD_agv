# 核心開發原則

## 🎯 適用場景
- AI Agent 進行代碼開發和修改時的核心指導原則
- 確保所有開發都基於實際代碼而非推測
- 提供系統性的代碼分析和理解方法

## 📋 核心開發原則

### 基於實際程式碼開發
**⚠️ 重要：程式開發時必須遵循以下核心原則**

#### 追蹤變數來源
- **查看 import 語句**: 遇到不明變數時，必須查看 `import` 語句找出定義來源
- **搜尋相關檔案**: 使用 `rg` 工具深入搜尋變數定義和使用範例
- **理解後行動**: 完全理解變數意義、用途和上下文後才進行修改
- **禁止推測**: 絕不使用推測或預想的內容，只使用實際程式內的定義
- **禁止虛構**: 絕不編造不存在的功能、檔案、配置或接口
- **先檢查再撰寫**: 如果不能確定某內容是否真實存在，必須先使用工具檢查
- **只寫真實存在**: 只有經過驗證真實存在的東西才能寫入文檔和README

#### 實施方法
```bash
# 1. 追蹤變數定義
rg "variable_name.*=" --type py -C 3        # 查找變數定義
rg "import.*variable_name" --type py        # 查找導入來源
rg "from.*import.*variable_name" --type py  # 查找具體導入

# 2. 理解變數上下文
rg "variable_name" --type py -C 5           # 查看使用上下文
rg "class.*variable_name|def.*variable_name" --type py  # 查找相關類/函數

# 3. 驗證理解正確性
# 在多個檔案中確認變數一致性使用
# 檢查型別提示和文檔字串

# 4. 驗證內容真實性
ls -la /path/to/file                    # 確認檔案確實存在
rg "function_name|class_name" --type py # 確認函數/類確實存在
cat /path/to/config.yaml               # 確認配置項確實存在
ros2 interface show msg_type            # 確認 ROS 2 接口確實存在
```

### 環境識別和工具使用
- **環境確認**: 使用 `.augment-guidelines` 識別當前執行環境（宿主機 vs 容器內）
- **統一工具**: 在宿主機使用 `r` 命令進行系統診斷和容器管理
- **專業工具**: 在容器內使用專業工具集進行開發和測試

### 代碼分析流程
1. **理解需求**: 明確要實現的功能和預期結果
2. **搜尋相關代碼**: 使用 Grep 和 Glob 工具找到相關實現
3. **驗證內容真實性**: 確認所有引用的檔案、函數、類、配置確實存在
4. **分析現有模式**: 理解現有代碼的架構和設計模式
5. **驗證依賴關係**: 確認所有依賴和導入的正確性
6. **實施修改**: 基於理解和驗證進行精確的代碼修改
7. **測試驗證**: 確保修改不會破壞現有功能

### 文檔寫作原則

#### 🚨 核心要求：只寫真實存在的內容
**⚠️ 絕對原則：真實存在的東西才能寫進README和文檔**

- **基於實際檢查**: 任何寫入文檔的內容都必須基於實際的工具檢查結果
- **驗證檔案存在**: 使用 `ls`, `LS`, `Read` 等工具驗證檔案確實存在
- **驗證功能存在**: 使用 `Grep`, `rg` 等工具驗證函數、類、配置確實存在
- **避免虛構範例**: 所有程式碼範例、配置範例都必須來自實際檔案
- **實時更新**: 當實際程式碼變更時，文檔必須同步更新
- **疑慮時檢查**: 如有任何疑慮，必須重新檢查確認後再寫入

#### 文檔寫作工作流程
```bash
# 1. 寫入前驗證
ls -la /path/to/file              # 確認檔案存在
rg "class_name|function_name"     # 確認程式碼存在
cat /path/to/config               # 確認配置存在

# 2. 寫入真實內容
# 只寫入經過驗證的內容

# 3. 定期重新驗證
# 定期重新檢查文檔中引用的內容是否仍然存在
```

## 🔗 交叉引用
- 搜尋技巧: @docs-ai/operations/development/search-strategies.md
- 環境管理: @docs-ai/context/system/dual-environment.md
- 工具使用: @docs-ai/operations/tools/unified-tools.md